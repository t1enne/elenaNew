{"version":3,"sources":["node_modules/ev-emitter/ev-emitter.js","node_modules/imagesloaded/imagesloaded.js","node_modules/regenerator-runtime/runtime.js","node_modules/mithril/render/vnode.js","node_modules/mithril/render/hyperscriptVnode.js","node_modules/mithril/render/hyperscript.js","node_modules/mithril/render/trust.js","node_modules/mithril/render/fragment.js","node_modules/mithril/hyperscript.js","node_modules/mithril/promise/polyfill.js","node_modules/mithril/promise/promise.js","node_modules/mithril/render/render.js","node_modules/mithril/render.js","node_modules/mithril/api/mount-redraw.js","node_modules/mithril/mount-redraw.js","node_modules/mithril/querystring/build.js","node_modules/mithril/pathname/assign.js","node_modules/mithril/pathname/build.js","node_modules/mithril/request/request.js","node_modules/mithril/request.js","node_modules/mithril/querystring/parse.js","node_modules/mithril/pathname/parse.js","node_modules/mithril/pathname/compileTemplate.js","node_modules/mithril/api/router.js","node_modules/mithril/route.js","node_modules/mithril/index.js","node_modules/locomotive-scroll/dist/locomotive-scroll.esm.js","src/js/utils.js","node_modules/animejs/lib/anime.es.js","src/js/cursor.js","src/js/Nav.js","src/assets/text/about.toml","src/js/Footer.js","src/js/Loader.js","src/js/About.js","src/js/menuItem.js","src/js/Works.js","src/js/Roller.js","src/js/Project.js","app.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","call","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","_superPropBase","property","hasOwnProperty","_get","receiver","get","base","desc","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","_arr","_n","_d","_e","undefined","_i","_s","next","done","err","minLen","n","slice","name","test","len","arr2","defaults","el","document","offset","repeat","smooth","initPosition","x","y","direction","gestureDirection","reloadOnContextChange","lerp","scrollbarContainer","scrollbarClass","scrollingClass","draggingClass","smoothClass","initClass","getSpeed","getDirection","scrollFromAnywhere","multiplier","firefoxMultiplier","touchMultiplier","resetNativeScroll","tablet","breakpoint","smartphone","_default","options","assign","namespace","html","documentElement","windowHeight","window","innerHeight","windowWidth","innerWidth","windowMiddle","els","currentElements","listeners","hasScrollTicking","hasCallEventSet","checkScroll","bind","checkResize","checkEvent","scroll","limit","offsetWidth","offsetHeight","isMobile","isTablet","context","directionAxis","speed","classList","add","addEventListener","init","initEvents","dispatchScroll","_this","resizeTick","requestAnimationFrame","resize","checkContext","navigator","userAgent","platform","maxTouchPoints","oldContext","oldSmooth","newSmooth","location","reload","_this2","scrollToEls","querySelectorAll","concat","setScrollTo","event","preventDefault","scrollTo","currentTarget","getAttribute","addElements","detectElements","_this3","scrollTop","scrollBottom","scrollLeft","scrollRight","entries","_ref","_ref2","inView","left","right","setInView","top","bottom","width","progress","setOutOfView","height","current","dispatchCall","_this4","remove","way","callWay","callValue","split","map","item","trim","callObj","callEvent","Event","dispatchEvent","scrollEvent","setEvents","func","list","unsetEvents","index","indexOf","splice","removeEventListener","_this5","type","replace","startScroll","stopScroll","setScroll","destroy","_this6","commonjsGlobal","globalThis","global","createCommonjsModule","fn","module","exports","smoothscroll","polyfill","w","d","style","__forceSmoothScrollPolyfill__","Element","HTMLElement","SCROLL_TIME","original","scrollBy","elementScroll","scrollElement","scrollIntoView","now","performance","isMicrosoftBrowser","userAgentPatterns","RegExp","join","ROUNDING_TOLERANCE","ease","k","Math","cos","PI","shouldBailOut","firstArg","behavior","hasScrollableSpace","axis","clientHeight","scrollHeight","clientWidth","scrollWidth","canOverflow","overflowValue","getComputedStyle","isScrollable","isScrollableY","isScrollableX","findScrollableParent","body","parentNode","host","step","time","currentX","currentY","elapsed","startTime","startX","startY","method","scrollable","smoothScroll","scrollX","pageXOffset","scrollY","pageYOffset","SyntaxError","scrollableParent","parentRects","getBoundingClientRect","clientRects","position","smoothscroll_1","_default$1","_Core","_super","history","scrollRestoration","smoothscrollPolyfill","addDirection","addSpeed","speedTs","max","updateElements","BCR","cl","dataset","id","targetEl","querySelector","targetElBCR","relativeOffset","getRelativeOffset","mappedEl","contains","includes","parseInt","callback","tagName","console","warn","isTargetReached","onScroll","update","propIsEnumerable","propertyIsEnumerable","toObject","val","shouldUseNative","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","test3","letter","objectAssign","to","s","E","on","ctx","once","listener","off","_","emit","data","evtArr","evts","liveEvents","tinyEmitter","lethargy","root","Lethargy","stability","sensitivity","tolerance","delay","abs","lastUpDeltas","ref","results","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","shift","isInertia","lastDeltas","lastDeltasNew","lastDeltasOld","newAverage","newSum","oldAverage","oldSum","reduce","t","showLastUpDeltas","showLastDownDeltas","support","getSupport","hasWheelEvent","hasMouseWheelEvent","hasTouch","TouchEvent","DocumentTouch","hasTouchWin","msMaxTouchPoints","hasPointer","msPointerEnabled","hasKeyDown","isFirefox","hasOwnProperty$1","bindallStandalone","functions","f","EVT_ID","src","VirtualScroll","keyCodes","LEFT","UP","RIGHT","DOWN","SPACE","mouseMultiplier","keyStep","preventTouch","unpreventTouchClass","limitInertia","useKeyboard","useTouch","_lethargy","_emitter","_event","deltaX","touchStartX","touchStartY","bodyTouchAction","passive","listenerOptions","_notify","evt","_onWheel","wheelDeltaX","wheelDeltaY","deltaMode","_onMouseWheel","_onTouchStart","targetTouches","pageX","pageY","_onTouchMove","_onKeyDown","keyCode","shiftKey","_bind","msTouchAction","_unbind","cb","events","reset","start","end","amt","getTranslate","translate","transform","webkitTransform","mozTransform","mat","match","parseFloat","getParents","elem","parents","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentT","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","src$1","bezier","mY1","mY2","Error","sampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","keyCodes$1","TAB","PAGEUP","PAGEDOWN","HOME","END","_default$2","inertia","isScrolling","isDraggingScrollbar","isTicking","parallaxElements","stop","checkKey","setAttribute","delta","vs","updateDelta","startScrolling","setScrollLimit","initScrollBar","addSections","transformElements","totalWidth","nodes","children","startScrollTs","stopScrolling","cancelAnimationFrame","checkScrollRaf","scrollToRaf","round","activeElement","HTMLInputElement","HTMLTextAreaElement","forced","updateScroll","distance","timeSinceStart","animatingScroll","sections","section","persistent","opacity","pointerEvents","removeAttribute","hasScrollbar","scrollBarTranslation","scrollBarLimit","scrollbarThumb","scrollbar","createElement","append","getScrollBar","releaseScrollBar","moveScrollBar","scrollbarBCR","scrollbarHeight","scrollbarWidth","scrollbarThumbBCR","reinitScrollBar","destroyScrollBar","clientX","clientY","targetParents","_ref3","_ref4","find","sticky","middle","elBCR","elTop","elLeft","elDistance","_this7","sectionBCR","mappedSection","element","lerpX","lerpY","msTransform","isForced","_this8","setAllElements","scrollMiddle","_ref5","_ref6","transformDistance","_this9","duration","isNaN","easing","disableLerp","targetInScope","targetBCR","offsetTop","offsetLeft","parentSection","candidate","_ref7","_ref8","parentSectionOffset","scrollStart","scrollTarget","min","scrollDiff","render","loop","Smooth","hash","getElementById","Native","a","b","c","clamp","num","getMousePos","posx","posy","defaultInstanceSettings","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","autoplay","timelineOffset","defaultTweenSettings","endDelay","validTransforms","cache","CSS","springs","minMax","stringContains","str","text","applyArguments","args","is","pth","svg","SVGElement","inp","dom","nodeType","fnc","und","nil","hex","rgb","hsl","col","parseEasingParameters","string","exec","spring","params","mass","stiffness","damping","velocity","w0","sqrt","zeta","wd","solver","exp","sin","getDuration","cached","frame","rest","steps","ceil","penner","eases","linear","functionEasings","Sine","Circ","Back","Bounce","pow2","pow","Elastic","amplitude","period","asin","baseEasings","easeIn","parseEasings","selectString","filterArray","thisArg","flattenArray","toArray","NodeList","HTMLCollection","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbToRgba","rgbValue","hexToRgba","hexValue","rgx","m","r","g","hslToRgba","hslValue","h","l","hue2rgb","q","colorToRgb","getUnit","getTransformUnit","propName","getFunctionValue","animatable","total","prop","convertPxToUnit","unit","valueUnit","baseline","tempEl","parentEl","appendChild","factor","removeChild","convertedUnit","getCSSValue","uppercasePropName","toLowerCase","getPropertyValue","getAnimationType","getElementTransforms","reg","transforms","Map","set","getTransformValue","defaultVal","getOriginalTargetValue","getRelativeValue","operator","u","validateValue","originalUnit","unitLess","substr","getDistance","p1","p2","getCircleLength","getRectLength","getLineLength","getPolylineLength","points","totalLength","previousPos","numberOfItems","currentPos","getItem","getPolygonLength","getTotalLength","setDashoffset","pathLength","getParentSvgEl","getParentSvg","pathEl","svgData","parentSvgEl","rect","viewBoxAttr","viewBox","vW","vH","getPath","path","percent","getPathProgress","isPathTargetInsideSVG","point","getPointAtLength","p0","scaleX","scaleY","atan2","decomposeValue","numbers","Number","strings","parseTargets","targets","targetsArray","pos","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","isFromTo","propArray","v","flattenKeyframes","keyframes","propertyNames","properties","newKey","getProperties","tweens","normalizeTweenValues","tween","normalizeTweens","previousTween","tweenValue","toUnit","originalValue","previousValue","fromUnit","isPath","isColor","setProgressValue","css","attribute","manual","last","setTargetsValue","animatables","animType","createAnimation","lastTween","getAnimations","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","instanceID","createNewInstance","instanceSettings","activeInstances","engine","raf","play","isDocumentHidden","anime","suspendWhenDocumentHidden","activeInstancesLength","activeInstance","paused","tick","handleVisibilityChange","_onDocumentVisibility","hidden","lastTime","childrenLength","resolve","makePromise","promise","Promise","_resolve","finished","toggleInstanceDirection","reversed","child","adjustTime","resetTime","currentTime","seekChild","seek","syncInstanceChildren","reversePlayback","i$1","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","passThrough","countIteration","remaining","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","began","loopBegan","changeBegan","changeCompleted","completed","pause","reverse","restart","removeTargetsFromInstance","removeTargetsFromAnimations","childAnimations","removeTargetsFromActiveInstances","stagger","grid","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","values","maxValue","fromX","fromY","floor","toX","toY","distanceX","distanceY","spacing","timeline","tl","instanceParams","tlIndex","ins","insParams","tlDuration","version","running","convertPx","random","mouse","ev","display","Cursor","DOM","bounds","renderedStyles","tx","previous","ty","onMouseMoveEv","view","onclick","setTimeout","route","about","vkSvg","routes","oncreate","links","vnode","log","redraw","state","allSources","pics","allImages","img","Loader","mult","imagesPromise","images","elements","count","progressedCount","perc","textContent","loader","LocomotiveScroll","scrolled","title","paragraphs","cursor","onremove","Nav","mypic","Footer","mousepos","mousePosCache","MenuItem","menuItem","attrs","url","animProps","showing","hiding","reveal","revealInner","revealImage","mouseenterFn","showImage","firstRAFCycle","loopRender","mouseleaveFn","stopRendering","hideImage","translateX","parentElement","requestId","calcBounds","mouseDistanceX","rotation","blur","translateY","rotate","href","class","cancelAnimation","animation","projects","Works","menuItems","animatableProperties","showMenuItems","applyToArray","wait","ms","revealer","projectNames","shards","pr","nextPic","oninit","JSON","parse","stringify","nextId","nextSrc","nextPics","handleScroll","nav","bgDark","bgLight","Project","pictures","titleArr","line","pic","Roller","main","onhashchange","transition","Home","activeTitle","slidesIndex","firstScroll","slidesLength","picturesObj","onmouseenter","onmouseleave","About","query","sel","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","stackTrace","innerText","innerHTML","modules","dep","Function","deps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC78BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtQA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACxBA;AACA,SAASA,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\"Vnodes must either always have keys or never have keys!\")\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar children = Vnode.normalizeChildren(vnode.children)\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\tvnode.attrs = null\n\tvnode.children = undefined\n\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\n\t\tattrs = newAttrs\n\t}\n\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\n\tif (hasClass) attrs.class = null\n\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\tvnode.text = children[0].children\n\t} else {\n\t\tvnode.children = children\n\t}\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n","\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\n\nmodule.exports = PromisePolyfill\n","\"use strict\"\n\nvar PromisePolyfill = require(\"./polyfill\")\n\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = global.Promise\n} else {\n\tmodule.exports = PromisePolyfill\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function($window) {\n\tvar $doc = $window && $window.document\n\tvar currentRedraw\n\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"`vnode.state` must not be modified\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvnode.instance = []\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tvnode.instance.push(child)\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertNode(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isKeyed === null && isOldKeyed == null) return // both lists are full of nulls\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveNodes(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveNodes(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveNodes(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveHTML(parent, old)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequece\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This covers a really specific edge case:\n\t// - Parent node is keyed and contains child\n\t// - Child is removed, returns unresolved promise in `onbeforeremove`\n\t// - Parent node is moved in keyed diff\n\t// - Remaining children still need moved appropriately\n\t//\n\t// Ideally, I'd track removed nodes as well, but that introduces a lot more\n\t// complexity and I'm not exactly interested in doing that.\n\tfunction moveNodes(parent, vnode, nextSibling) {\n\t\tvar frag = $doc.createDocumentFragment()\n\t\tmoveChildToFrag(parent, frag, vnode)\n\t\tinsertNode(parent, frag, nextSibling)\n\t}\n\tfunction moveChildToFrag(parent, frag, vnode) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode.dom != null && vnode.dom.parentNode === parent) {\n\t\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\t\tvnode = vnode.instance\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else if (vnode.tag === \"<\") {\n\t\t\t\tfor (var i = 0; i < vnode.instance.length; i++) {\n\t\t\t\t\tfrag.appendChild(vnode.instance[i])\n\t\t\t\t}\n\t\t\t} else if (vnode.tag !== \"[\") {\n\t\t\t\t// Don't recurse for text nodes *or* elements, just fragments\n\t\t\t\tfrag.appendChild(vnode.dom)\n\t\t\t} else if (vnode.children.length === 1) {\n\t\t\t\tvnode = vnode.children[0]\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < vnode.children.length; i++) {\n\t\t\t\t\tvar child = vnode.children[i]\n\t\t\t\t\tif (child != null) moveChildToFrag(parent, frag, child)\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar mask = 0\n\t\tvar original = vnode.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.state.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.attrs.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode, original)\n\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode)\n\t\t\tremoveChild(parent, vnode)\n\t\t} else {\n\t\t\tif (stateResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) { mask &= 2; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tstateResult.then(next, next)\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) { mask &= 1; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tattrsResult.then(next, next)\n\t\t\t}\n\t\t}\n\n\t\tfunction reallyRemove() {\n\t\t\tcheckState(vnode, original)\n\t\t\tonremove(vnode)\n\t\t\tremoveChild(parent, vnode)\n\t\t}\n\t}\n\tfunction removeHTML(parent, vnode) {\n\t\tfor (var i = 0; i < vnode.instance.length; i++) {\n\t\t\tparent.removeChild(vnode.instance[i])\n\t\t}\n\t}\n\tfunction removeChild(parent, vnode) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode.dom != null && vnode.dom.parentNode === parent) {\n\t\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\t\tvnode = vnode.instance\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else if (vnode.tag === \"<\") {\n\t\t\t\tremoveHTML(parent, vnode)\n\t\t\t} else {\n\t\t\t\tif (vnode.tag !== \"[\") {\n\t\t\t\t\tparent.removeChild(vnode.dom)\n\t\t\t\t\tif (!Array.isArray(vnode.children)) break\n\t\t\t\t}\n\t\t\t\tif (vnode.children.length === 1) {\n\t\t\t\t\tvnode = vnode.children[0]\n\t\t\t\t\tif (vnode != null) continue\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0; i < vnode.children.length; i++) {\n\t\t\t\t\t\tvar child = vnode.children[i]\n\t\t\t\t\t\tif (child != null) removeChild(parent, child)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && vnode.dom === activeElement()) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode.tag === \"input\" && key === \"type\") vnode.dom.setAttribute(key, value)\n\t\t\telse vnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (attrs != null) {\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\n\t\t// First time rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\n\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\tvar prevRedraw = currentRedraw\n\t\ttry {\n\t\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t}\n\t\tdom.vnodes = vnodes\n\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n}\n","\"use strict\"\n\nmodule.exports = require(\"./render/render\")(window)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar rendering = false\n\tvar pending = false\n\n\tfunction sync() {\n\t\tif (rendering) throw new Error(\"Nested m.redraw.sync() call\")\n\t\trendering = true\n\t\tfor (var i = 0; i < subscriptions.length; i += 2) {\n\t\t\ttry { render(subscriptions[i], Vnode(subscriptions[i + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\trendering = false\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\trender(root, [], redraw)\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n","\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, requestAnimationFrame, console)\n","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","\"use strict\"\n\nmodule.exports = Object.assign || function(target, source) {\n\tif(source) Object.keys(source).forEach(function(key) { target[key] = source[key] })\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar assign = require(\"./assign\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names *must* be separated\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tassign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\n\nmodule.exports = function($window, Promise, oncompletion) {\n\tvar callbackCount = 0\n\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(buildPathname(url, args.params), args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif ({}.hasOwnProperty.call(args.headers, key) && name.test(key)) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, /^content-type$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") response = JSON.parse(ev.target.responseText)\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t}\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t}\n}\n","\"use strict\"\n\nvar PromisePolyfill = require(\"./promise/promise\")\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(window, PromisePolyfill, mountRedraw.redraw)\n","\"use strict\"\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t\tif (path.length > 1 && path[path.length - 1] === \"/\") path = path.slice(0, -1)\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n","\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\nvar Promise = require(\"../promise/promise\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar assign = require(\"../pathname/assign\")\n\nvar sentinel = {}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar fireAsync\n\n\tfunction setPath(path, data, options) {\n\t\tpath = buildPathname(path, data)\n\t\tif (fireAsync != null) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\n\tvar currentResolver = sentinel, component, attrs, currentPath, lastUpdate\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\t// 0 = start\n\t\t// 1 = init\n\t\t// 2 = ready\n\t\tvar state = 0\n\n\t\tvar compiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a `/`\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either `/`, `.`, or `-`\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\t\tvar p = Promise.resolve()\n\t\tvar scheduled = false\n\t\tvar onremove\n\n\t\tfireAsync = null\n\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes\")\n\t\t\t}\n\t\t}\n\n\t\tfunction resolveRoute() {\n\t\t\tscheduled = false\n\t\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t\t// but that's not our problem.\n\t\t\tvar prefix = $window.location.hash\n\t\t\tif (route.prefix[0] !== \"#\") {\n\t\t\t\tprefix = $window.location.search + prefix\n\t\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t\t}\n\t\t\t}\n\t\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t\t// since the representation is consistently a relatively poorly\n\t\t\t// optimized cons string.\n\t\t\tvar path = prefix.concat()\n\t\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\t\t\t.slice(route.prefix.length)\n\t\t\tvar data = parsePathname(path)\n\n\t\t\tassign(data.params, $window.history.state)\n\n\t\t\tfunction fail() {\n\t\t\t\tif (path === defaultRoute) throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t\t\tsetPath(defaultRoute, null, {replace: true})\n\t\t\t}\n\n\t\t\tloop(0)\n\t\t\tfunction loop(i) {\n\t\t\t\t// 0 = init\n\t\t\t\t// 1 = scheduled\n\t\t\t\t// 2 = done\n\t\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\t\tvar localComp = payload\n\t\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\t\tif (state === 2) mountRedraw.redraw()\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\t\tmountRedraw.redraw.sync()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t\t}).then(update, fail)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse update(\"div\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfail()\n\t\t\t}\n\t\t}\n\n\t\t// Set it unconditionally so `m.route.set` and `m.route.Link` both work,\n\t\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t\t// cleared if `hashchange` is used, since that makes it automatically\n\t\t// async.\n\t\tfireAsync = function() {\n\t\t\tif (!scheduled) {\n\t\t\t\tscheduled = true\n\t\t\t\tcallAsync(resolveRoute)\n\t\t\t}\n\t\t}\n\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\tonremove = function() {\n\t\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\tfireAsync = null\n\t\t\tonremove = function() {\n\t\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\n\t\treturn mountRedraw.mount(root, {\n\t\t\tonbeforeupdate: function() {\n\t\t\t\tstate = state ? 2 : 1\n\t\t\t\treturn !(!state || sentinel === currentResolver)\n\t\t\t},\n\t\t\toncreate: resolveRoute,\n\t\t\tonremove: onremove,\n\t\t\tview: function() {\n\t\t\t\tif (!state || sentinel === currentResolver) return\n\t\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\t\tvar vnode = [Vnode(component, attrs.key, attrs)]\n\t\t\t\tif (currentResolver) vnode = currentResolver.render(vnode[0])\n\t\t\t\treturn vnode\n\t\t\t},\n\t\t})\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\tvar options = vnode.attrs.options\n\t\t\t// Remove these so they don't get overwritten\n\t\t\tvar attrs = {}, onclick, href\n\t\t\tassign(attrs, vnode.attrs)\n\t\t\t// The first two are internal, but the rest are magic attributes\n\t\t\t// that need censored to not screw up rendering.\n\t\t\tattrs.selector = attrs.options = attrs.key = attrs.oninit =\n\t\t\tattrs.oncreate = attrs.onbeforeupdate = attrs.onupdate =\n\t\t\tattrs.onbeforeremove = attrs.onremove = null\n\n\t\t\t// Do this now so we can get the most current `href` and `disabled`.\n\t\t\t// Those attributes may also be specified in the selector, and we\n\t\t\t// should honor that.\n\t\t\tvar child = m(vnode.attrs.selector || \"a\", attrs, vnode.children)\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want to do this on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t\tchild.attrs.onclick = null\n\t\t\t} else {\n\t\t\t\tonclick = child.attrs.onclick\n\t\t\t\thref = child.attrs.href\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(window, mountRedraw)\n","\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.jsonp = request.jsonp\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.PromisePolyfill = require(\"./promise/polyfill\")\n\nmodule.exports = m\n","/* locomotive-scroll v4.1.1 | MIT License | https://github.com/locomotivemtl/locomotive-scroll */\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar defaults = {\n  el: document,\n  name: 'scroll',\n  offset: [0, 0],\n  repeat: false,\n  smooth: false,\n  initPosition: {\n    x: 0,\n    y: 0\n  },\n  direction: 'vertical',\n  gestureDirection: 'vertical',\n  reloadOnContextChange: false,\n  lerp: 0.1,\n  \"class\": 'is-inview',\n  scrollbarContainer: false,\n  scrollbarClass: 'c-scrollbar',\n  scrollingClass: 'has-scroll-scrolling',\n  draggingClass: 'has-scroll-dragging',\n  smoothClass: 'has-scroll-smooth',\n  initClass: 'has-scroll-init',\n  getSpeed: false,\n  getDirection: false,\n  scrollFromAnywhere: false,\n  multiplier: 1,\n  firefoxMultiplier: 50,\n  touchMultiplier: 2,\n  resetNativeScroll: true,\n  tablet: {\n    smooth: false,\n    direction: 'vertical',\n    gestureDirection: 'vertical',\n    breakpoint: 1024\n  },\n  smartphone: {\n    smooth: false,\n    direction: 'vertical',\n    gestureDirection: 'vertical'\n  }\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, _default);\n\n    Object.assign(this, defaults, options);\n    this.smartphone = defaults.smartphone;\n    if (options.smartphone) Object.assign(this.smartphone, options.smartphone);\n    this.tablet = defaults.tablet;\n    if (options.tablet) Object.assign(this.tablet, options.tablet);\n    this.namespace = 'locomotive';\n    this.html = document.documentElement;\n    this.windowHeight = window.innerHeight;\n    this.windowWidth = window.innerWidth;\n    this.windowMiddle = {\n      x: this.windowWidth / 2,\n      y: this.windowHeight / 2\n    };\n    this.els = {};\n    this.currentElements = {};\n    this.listeners = {};\n    this.hasScrollTicking = false;\n    this.hasCallEventSet = false;\n    this.checkScroll = this.checkScroll.bind(this);\n    this.checkResize = this.checkResize.bind(this);\n    this.checkEvent = this.checkEvent.bind(this);\n    this.instance = {\n      scroll: {\n        x: 0,\n        y: 0\n      },\n      limit: {\n        x: this.html.offsetWidth,\n        y: this.html.offsetHeight\n      },\n      currentElements: this.currentElements\n    };\n\n    if (this.isMobile) {\n      if (this.isTablet) {\n        this.context = 'tablet';\n      } else {\n        this.context = 'smartphone';\n      }\n    } else {\n      this.context = 'desktop';\n    }\n\n    if (this.isMobile) this.direction = this[this.context].direction;\n\n    if (this.direction === 'horizontal') {\n      this.directionAxis = 'x';\n    } else {\n      this.directionAxis = 'y';\n    }\n\n    if (this.getDirection) {\n      this.instance.direction = null;\n    }\n\n    if (this.getDirection) {\n      this.instance.speed = 0;\n    }\n\n    this.html.classList.add(this.initClass);\n    window.addEventListener('resize', this.checkResize, false);\n  }\n\n  _createClass(_default, [{\n    key: \"init\",\n    value: function init() {\n      this.initEvents();\n    }\n  }, {\n    key: \"checkScroll\",\n    value: function checkScroll() {\n      this.dispatchScroll();\n    }\n  }, {\n    key: \"checkResize\",\n    value: function checkResize() {\n      var _this = this;\n\n      if (!this.resizeTick) {\n        this.resizeTick = true;\n        requestAnimationFrame(function () {\n          _this.resize();\n\n          _this.resizeTick = false;\n        });\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {}\n  }, {\n    key: \"checkContext\",\n    value: function checkContext() {\n      if (!this.reloadOnContextChange) return;\n      this.isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 || this.windowWidth < this.tablet.breakpoint;\n      this.isTablet = this.isMobile && this.windowWidth >= this.tablet.breakpoint;\n      var oldContext = this.context;\n\n      if (this.isMobile) {\n        if (this.isTablet) {\n          this.context = 'tablet';\n        } else {\n          this.context = 'smartphone';\n        }\n      } else {\n        this.context = 'desktop';\n      }\n\n      if (oldContext != this.context) {\n        var oldSmooth = oldContext == 'desktop' ? this.smooth : this[oldContext].smooth;\n        var newSmooth = this.context == 'desktop' ? this.smooth : this[this.context].smooth;\n        if (oldSmooth != newSmooth) window.location.reload();\n      }\n    }\n  }, {\n    key: \"initEvents\",\n    value: function initEvents() {\n      var _this2 = this;\n\n      this.scrollToEls = this.el.querySelectorAll(\"[data-\".concat(this.name, \"-to]\"));\n      this.setScrollTo = this.setScrollTo.bind(this);\n      this.scrollToEls.forEach(function (el) {\n        el.addEventListener('click', _this2.setScrollTo, false);\n      });\n    }\n  }, {\n    key: \"setScrollTo\",\n    value: function setScrollTo(event) {\n      event.preventDefault();\n      this.scrollTo(event.currentTarget.getAttribute(\"data-\".concat(this.name, \"-href\")) || event.currentTarget.getAttribute('href'), {\n        offset: event.currentTarget.getAttribute(\"data-\".concat(this.name, \"-offset\"))\n      });\n    }\n  }, {\n    key: \"addElements\",\n    value: function addElements() {}\n  }, {\n    key: \"detectElements\",\n    value: function detectElements(hasCallEventSet) {\n      var _this3 = this;\n\n      var scrollTop = this.instance.scroll.y;\n      var scrollBottom = scrollTop + this.windowHeight;\n      var scrollLeft = this.instance.scroll.x;\n      var scrollRight = scrollLeft + this.windowWidth;\n      Object.entries(this.els).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            i = _ref2[0],\n            el = _ref2[1];\n\n        if (el && (!el.inView || hasCallEventSet)) {\n          if (_this3.direction === 'horizontal') {\n            if (scrollRight >= el.left && scrollLeft < el.right) {\n              _this3.setInView(el, i);\n            }\n          } else {\n            if (scrollBottom >= el.top && scrollTop < el.bottom) {\n              _this3.setInView(el, i);\n            }\n          }\n        }\n\n        if (el && el.inView) {\n          if (_this3.direction === 'horizontal') {\n            var width = el.right - el.left;\n            el.progress = (_this3.instance.scroll.x - (el.left - _this3.windowWidth)) / (width + _this3.windowWidth);\n\n            if (scrollRight < el.left || scrollLeft > el.right) {\n              _this3.setOutOfView(el, i);\n            }\n          } else {\n            var height = el.bottom - el.top;\n            el.progress = (_this3.instance.scroll.y - (el.top - _this3.windowHeight)) / (height + _this3.windowHeight);\n\n            if (scrollBottom < el.top || scrollTop > el.bottom) {\n              _this3.setOutOfView(el, i);\n            }\n          }\n        }\n      }); // this.els = this.els.filter((current, i) => {\n      //     return current !== null;\n      // });\n\n      this.hasScrollTicking = false;\n    }\n  }, {\n    key: \"setInView\",\n    value: function setInView(current, i) {\n      this.els[i].inView = true;\n      current.el.classList.add(current[\"class\"]);\n      this.currentElements[i] = current;\n\n      if (current.call && this.hasCallEventSet) {\n        this.dispatchCall(current, 'enter');\n\n        if (!current.repeat) {\n          this.els[i].call = false;\n        }\n      } // if (!current.repeat && !current.speed && !current.sticky) {\n      //     if (!current.call || current.call && this.hasCallEventSet) {\n      //        this.els[i] = null\n      //     }\n      // }\n\n    }\n  }, {\n    key: \"setOutOfView\",\n    value: function setOutOfView(current, i) {\n      var _this4 = this;\n\n      // if (current.repeat || current.speed !== undefined) {\n      this.els[i].inView = false; // }\n\n      Object.keys(this.currentElements).forEach(function (el) {\n        el === i && delete _this4.currentElements[el];\n      });\n\n      if (current.call && this.hasCallEventSet) {\n        this.dispatchCall(current, 'exit');\n      }\n\n      if (current.repeat) {\n        current.el.classList.remove(current[\"class\"]);\n      }\n    }\n  }, {\n    key: \"dispatchCall\",\n    value: function dispatchCall(current, way) {\n      this.callWay = way;\n      this.callValue = current.call.split(',').map(function (item) {\n        return item.trim();\n      });\n      this.callObj = current;\n      if (this.callValue.length == 1) this.callValue = this.callValue[0];\n      var callEvent = new Event(this.namespace + 'call');\n      this.el.dispatchEvent(callEvent);\n    }\n  }, {\n    key: \"dispatchScroll\",\n    value: function dispatchScroll() {\n      var scrollEvent = new Event(this.namespace + 'scroll');\n      this.el.dispatchEvent(scrollEvent);\n    }\n  }, {\n    key: \"setEvents\",\n    value: function setEvents(event, func) {\n      if (!this.listeners[event]) {\n        this.listeners[event] = [];\n      }\n\n      var list = this.listeners[event];\n      list.push(func);\n\n      if (list.length === 1) {\n        this.el.addEventListener(this.namespace + event, this.checkEvent, false);\n      }\n\n      if (event === 'call') {\n        this.hasCallEventSet = true;\n        this.detectElements(true);\n      }\n    }\n  }, {\n    key: \"unsetEvents\",\n    value: function unsetEvents(event, func) {\n      if (!this.listeners[event]) return;\n      var list = this.listeners[event];\n      var index = list.indexOf(func);\n      if (index < 0) return;\n      list.splice(index, 1);\n\n      if (list.index === 0) {\n        this.el.removeEventListener(this.namespace + event, this.checkEvent, false);\n      }\n    }\n  }, {\n    key: \"checkEvent\",\n    value: function checkEvent(event) {\n      var _this5 = this;\n\n      var name = event.type.replace(this.namespace, '');\n      var list = this.listeners[name];\n      if (!list || list.length === 0) return;\n      list.forEach(function (func) {\n        switch (name) {\n          case 'scroll':\n            return func(_this5.instance);\n\n          case 'call':\n            return func(_this5.callValue, _this5.callWay, _this5.callObj);\n\n          default:\n            return func();\n        }\n      });\n    }\n  }, {\n    key: \"startScroll\",\n    value: function startScroll() {}\n  }, {\n    key: \"stopScroll\",\n    value: function stopScroll() {}\n  }, {\n    key: \"setScroll\",\n    value: function setScroll(x, y) {\n      this.instance.scroll = {\n        x: 0,\n        y: 0\n      };\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this6 = this;\n\n      window.removeEventListener('resize', this.checkResize, false);\n      Object.keys(this.listeners).forEach(function (event) {\n        _this6.el.removeEventListener(_this6.namespace + event, _this6.checkEvent, false);\n      });\n      this.listeners = {};\n      this.scrollToEls.forEach(function (el) {\n        el.removeEventListener('click', _this6.setScrollTo, false);\n      });\n      this.html.classList.remove(this.initClass);\n    }\n  }]);\n\n  return _default;\n}();\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar smoothscroll = createCommonjsModule(function (module, exports) {\n/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  }\n\n}());\n});\nvar smoothscroll_1 = smoothscroll.polyfill;\n\nvar _default$1 = /*#__PURE__*/function (_Core) {\n  _inherits(_default, _Core);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this, options);\n\n    if (_this.resetNativeScroll) {\n      if (history.scrollRestoration) {\n        history.scrollRestoration = 'manual';\n      }\n\n      window.scrollTo(0, 0);\n    }\n\n    window.addEventListener('scroll', _this.checkScroll, false);\n\n    if (window.smoothscrollPolyfill === undefined) {\n      window.smoothscrollPolyfill = smoothscroll;\n      window.smoothscrollPolyfill.polyfill();\n    }\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"init\",\n    value: function init() {\n      this.instance.scroll.y = window.pageYOffset;\n      this.addElements();\n      this.detectElements();\n\n      _get(_getPrototypeOf(_default.prototype), \"init\", this).call(this);\n    }\n  }, {\n    key: \"checkScroll\",\n    value: function checkScroll() {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(_default.prototype), \"checkScroll\", this).call(this);\n\n      if (this.getDirection) {\n        this.addDirection();\n      }\n\n      if (this.getSpeed) {\n        this.addSpeed();\n        this.speedTs = Date.now();\n      }\n\n      this.instance.scroll.y = window.pageYOffset;\n\n      if (Object.entries(this.els).length) {\n        if (!this.hasScrollTicking) {\n          requestAnimationFrame(function () {\n            _this2.detectElements();\n          });\n          this.hasScrollTicking = true;\n        }\n      }\n    }\n  }, {\n    key: \"addDirection\",\n    value: function addDirection() {\n      if (window.pageYOffset > this.instance.scroll.y) {\n        if (this.instance.direction !== 'down') {\n          this.instance.direction = 'down';\n        }\n      } else if (window.pageYOffset < this.instance.scroll.y) {\n        if (this.instance.direction !== 'up') {\n          this.instance.direction = 'up';\n        }\n      }\n    }\n  }, {\n    key: \"addSpeed\",\n    value: function addSpeed() {\n      if (window.pageYOffset != this.instance.scroll.y) {\n        this.instance.speed = (window.pageYOffset - this.instance.scroll.y) / Math.max(1, Date.now() - this.speedTs);\n      } else {\n        this.instance.speed = 0;\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (Object.entries(this.els).length) {\n        this.windowHeight = window.innerHeight;\n        this.updateElements();\n      }\n    }\n  }, {\n    key: \"addElements\",\n    value: function addElements() {\n      var _this3 = this;\n\n      this.els = {};\n      var els = this.el.querySelectorAll('[data-' + this.name + ']');\n      els.forEach(function (el, index) {\n        var BCR = el.getBoundingClientRect();\n        var cl = el.dataset[_this3.name + 'Class'] || _this3[\"class\"];\n        var id = typeof el.dataset[_this3.name + 'Id'] === 'string' ? el.dataset[_this3.name + 'Id'] : index;\n        var top;\n        var left;\n        var offset = typeof el.dataset[_this3.name + 'Offset'] === 'string' ? el.dataset[_this3.name + 'Offset'].split(',') : _this3.offset;\n        var repeat = el.dataset[_this3.name + 'Repeat'];\n        var call = el.dataset[_this3.name + 'Call'];\n        var target = el.dataset[_this3.name + 'Target'];\n        var targetEl;\n\n        if (target !== undefined) {\n          targetEl = document.querySelector(\"\".concat(target));\n        } else {\n          targetEl = el;\n        }\n\n        var targetElBCR = targetEl.getBoundingClientRect();\n        top = targetElBCR.top + _this3.instance.scroll.y;\n        left = targetElBCR.left + _this3.instance.scroll.x;\n        var bottom = top + targetEl.offsetHeight;\n        var right = left + targetEl.offsetWidth;\n\n        if (repeat == 'false') {\n          repeat = false;\n        } else if (repeat != undefined) {\n          repeat = true;\n        } else {\n          repeat = _this3.repeat;\n        }\n\n        var relativeOffset = _this3.getRelativeOffset(offset);\n\n        top = top + relativeOffset[0];\n        bottom = bottom - relativeOffset[1];\n        var mappedEl = {\n          el: el,\n          targetEl: targetEl,\n          id: id,\n          \"class\": cl,\n          top: top,\n          bottom: bottom,\n          left: left,\n          right: right,\n          offset: offset,\n          progress: 0,\n          repeat: repeat,\n          inView: false,\n          call: call\n        };\n        _this3.els[id] = mappedEl;\n\n        if (el.classList.contains(cl)) {\n          _this3.setInView(_this3.els[id], id);\n        }\n      });\n    }\n  }, {\n    key: \"updateElements\",\n    value: function updateElements() {\n      var _this4 = this;\n\n      Object.entries(this.els).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            i = _ref2[0],\n            el = _ref2[1];\n\n        var top = el.targetEl.getBoundingClientRect().top + _this4.instance.scroll.y;\n\n        var bottom = top + el.targetEl.offsetHeight;\n\n        var relativeOffset = _this4.getRelativeOffset(el.offset);\n\n        _this4.els[i].top = top + relativeOffset[0];\n        _this4.els[i].bottom = bottom - relativeOffset[1];\n      });\n      this.hasScrollTicking = false;\n    }\n  }, {\n    key: \"getRelativeOffset\",\n    value: function getRelativeOffset(offset) {\n      var relativeOffset = [0, 0];\n\n      if (offset) {\n        for (var i = 0; i < offset.length; i++) {\n          if (typeof offset[i] == 'string') {\n            if (offset[i].includes('%')) {\n              relativeOffset[i] = parseInt(offset[i].replace('%', '') * this.windowHeight / 100);\n            } else {\n              relativeOffset[i] = parseInt(offset[i]);\n            }\n          } else {\n            relativeOffset[i] = offset[i];\n          }\n        }\n      }\n\n      return relativeOffset;\n    }\n    /**\n     * Scroll to a desired target.\n     *\n     * @param  Available options :\n     *          target {node, string, \"top\", \"bottom\", int} - The DOM element we want to scroll to\n     *          options {object} - Options object for additionnal settings.\n     * @return {void}\n     */\n\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(target) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      // Parse options\n      var offset = parseInt(options.offset) || 0; // An offset to apply on top of given `target` or `sourceElem`'s target\n\n      var callback = options.callback ? options.callback : false; // function called when scrollTo completes (note that it won't wait for lerp to stabilize)\n\n      if (typeof target === 'string') {\n        // Selector or boundaries\n        if (target === 'top') {\n          target = this.html;\n        } else if (target === 'bottom') {\n          target = this.html.offsetHeight - window.innerHeight;\n        } else {\n          target = document.querySelector(target); // If the query fails, abort\n\n          if (!target) {\n            return;\n          }\n        }\n      } else if (typeof target === 'number') {\n        // Absolute coordinate\n        target = parseInt(target);\n      } else if (target && target.tagName) ; else {\n        console.warn('`target` parameter is not valid');\n        return;\n      } // We have a target that is not a coordinate yet, get it\n\n\n      if (typeof target !== 'number') {\n        offset = target.getBoundingClientRect().top + offset + this.instance.scroll.y;\n      } else {\n        offset = target + offset;\n      }\n\n      var isTargetReached = function isTargetReached() {\n        return parseInt(window.pageYOffset) === parseInt(offset);\n      };\n\n      if (callback) {\n        if (isTargetReached()) {\n          callback();\n          return;\n        } else {\n          var onScroll = function onScroll() {\n            if (isTargetReached()) {\n              window.removeEventListener('scroll', onScroll);\n              callback();\n            }\n          };\n\n          window.addEventListener('scroll', onScroll);\n        }\n      }\n\n      window.scrollTo({\n        top: offset,\n        behavior: 'smooth'\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.addElements();\n      this.detectElements();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(_default.prototype), \"destroy\", this).call(this);\n\n      window.removeEventListener('scroll', this.checkScroll, false);\n    }\n  }]);\n\n  return _default;\n}(_default);\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    }\n    listener._ = callback;\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nvar tinyEmitter = E;\n\nvar lethargy = createCommonjsModule(function (module, exports) {\n// Generated by CoffeeScript 1.9.2\n(function() {\n  var root;\n\n  root =  exports !== null ? exports : this;\n\n  root.Lethargy = (function() {\n    function Lethargy(stability, sensitivity, tolerance, delay) {\n      this.stability = stability != null ? Math.abs(stability) : 8;\n      this.sensitivity = sensitivity != null ? 1 + Math.abs(sensitivity) : 100;\n      this.tolerance = tolerance != null ? 1 + Math.abs(tolerance) : 1.1;\n      this.delay = delay != null ? delay : 150;\n      this.lastUpDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.lastDownDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.deltasTimestamp = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n    }\n\n    Lethargy.prototype.check = function(e) {\n      var lastDelta;\n      e = e.originalEvent || e;\n      if (e.wheelDelta != null) {\n        lastDelta = e.wheelDelta;\n      } else if (e.deltaY != null) {\n        lastDelta = e.deltaY * -40;\n      } else if ((e.detail != null) || e.detail === 0) {\n        lastDelta = e.detail * -40;\n      }\n      this.deltasTimestamp.push(Date.now());\n      this.deltasTimestamp.shift();\n      if (lastDelta > 0) {\n        this.lastUpDeltas.push(lastDelta);\n        this.lastUpDeltas.shift();\n        return this.isInertia(1);\n      } else {\n        this.lastDownDeltas.push(lastDelta);\n        this.lastDownDeltas.shift();\n        return this.isInertia(-1);\n      }\n    };\n\n    Lethargy.prototype.isInertia = function(direction) {\n      var lastDeltas, lastDeltasNew, lastDeltasOld, newAverage, newSum, oldAverage, oldSum;\n      lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n      if (lastDeltas[0] === null) {\n        return direction;\n      }\n      if (this.deltasTimestamp[(this.stability * 2) - 2] + this.delay > Date.now() && lastDeltas[0] === lastDeltas[(this.stability * 2) - 1]) {\n        return false;\n      }\n      lastDeltasOld = lastDeltas.slice(0, this.stability);\n      lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n      oldSum = lastDeltasOld.reduce(function(t, s) {\n        return t + s;\n      });\n      newSum = lastDeltasNew.reduce(function(t, s) {\n        return t + s;\n      });\n      oldAverage = oldSum / lastDeltasOld.length;\n      newAverage = newSum / lastDeltasNew.length;\n      if (Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance) && (this.sensitivity < Math.abs(newAverage))) {\n        return direction;\n      } else {\n        return false;\n      }\n    };\n\n    Lethargy.prototype.showLastUpDeltas = function() {\n      return this.lastUpDeltas;\n    };\n\n    Lethargy.prototype.showLastDownDeltas = function() {\n      return this.lastDownDeltas;\n    };\n\n    return Lethargy;\n\n  })();\n\n}).call(commonjsGlobal);\n});\n\nvar support = (function getSupport() {\n    return {\n        hasWheelEvent: 'onwheel' in document,\n        hasMouseWheelEvent: 'onmousewheel' in document,\n        hasTouch: ('ontouchstart' in window) || window.TouchEvent || window.DocumentTouch && document instanceof DocumentTouch,\n        hasTouchWin: navigator.msMaxTouchPoints && navigator.msMaxTouchPoints > 1,\n        hasPointer: !!window.navigator.msPointerEnabled,\n        hasKeyDown: 'onkeydown' in document,\n        isFirefox: navigator.userAgent.indexOf('Firefox') > -1\n    };\n})();\n\nvar toString = Object.prototype.toString,\n    hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\nvar bindallStandalone = function(object) {\n    if(!object) return console.warn('bindAll requires at least one argument.');\n\n    var functions = Array.prototype.slice.call(arguments, 1);\n\n    if (functions.length === 0) {\n\n        for (var method in object) {\n            if(hasOwnProperty$1.call(object, method)) {\n                if(typeof object[method] == 'function' && toString.call(object[method]) == \"[object Function]\") {\n                    functions.push(method);\n                }\n            }\n        }\n    }\n\n    for(var i = 0; i < functions.length; i++) {\n        var f = functions[i];\n        object[f] = bind(object[f], object);\n    }\n};\n\n/*\n    Faster bind without specific-case checking. (see https://coderwall.com/p/oi3j3w).\n    bindAll is only needed for events binding so no need to make slow fixes for constructor\n    or partial application.\n*/\nfunction bind(func, context) {\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n\nvar Lethargy = lethargy.Lethargy;\n\n\n\nvar EVT_ID = 'virtualscroll';\n\nvar src = VirtualScroll;\n\nvar keyCodes = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    SPACE: 32\n};\n\nfunction VirtualScroll(options) {\n    bindallStandalone(this, '_onWheel', '_onMouseWheel', '_onTouchStart', '_onTouchMove', '_onKeyDown');\n\n    this.el = window;\n    if (options && options.el) {\n        this.el = options.el;\n        delete options.el;\n    }\n    this.options = objectAssign({\n        mouseMultiplier: 1,\n        touchMultiplier: 2,\n        firefoxMultiplier: 15,\n        keyStep: 120,\n        preventTouch: false,\n        unpreventTouchClass: 'vs-touchmove-allowed',\n        limitInertia: false,\n        useKeyboard: true,\n        useTouch: true\n    }, options);\n\n    if (this.options.limitInertia) this._lethargy = new Lethargy();\n\n    this._emitter = new tinyEmitter();\n    this._event = {\n        y: 0,\n        x: 0,\n        deltaX: 0,\n        deltaY: 0\n    };\n    this.touchStartX = null;\n    this.touchStartY = null;\n    this.bodyTouchAction = null;\n\n    if (this.options.passive !== undefined) {\n        this.listenerOptions = {passive: this.options.passive};\n    }\n}\n\nVirtualScroll.prototype._notify = function(e) {\n    var evt = this._event;\n    evt.x += evt.deltaX;\n    evt.y += evt.deltaY;\n\n   this._emitter.emit(EVT_ID, {\n        x: evt.x,\n        y: evt.y,\n        deltaX: evt.deltaX,\n        deltaY: evt.deltaY,\n        originalEvent: e\n   });\n};\n\nVirtualScroll.prototype._onWheel = function(e) {\n    var options = this.options;\n    if (this._lethargy && this._lethargy.check(e) === false) return;\n    var evt = this._event;\n\n    // In Chrome and in Firefox (at least the new one)\n    evt.deltaX = e.wheelDeltaX || e.deltaX * -1;\n    evt.deltaY = e.wheelDeltaY || e.deltaY * -1;\n\n    // for our purpose deltamode = 1 means user is on a wheel mouse, not touch pad\n    // real meaning: https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent#Delta_modes\n    if(support.isFirefox && e.deltaMode == 1) {\n        evt.deltaX *= options.firefoxMultiplier;\n        evt.deltaY *= options.firefoxMultiplier;\n    }\n\n    evt.deltaX *= options.mouseMultiplier;\n    evt.deltaY *= options.mouseMultiplier;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onMouseWheel = function(e) {\n    if (this.options.limitInertia && this._lethargy.check(e) === false) return;\n\n    var evt = this._event;\n\n    // In Safari, IE and in Chrome if 'wheel' isn't defined\n    evt.deltaX = (e.wheelDeltaX) ? e.wheelDeltaX : 0;\n    evt.deltaY = (e.wheelDeltaY) ? e.wheelDeltaY : e.wheelDelta;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onTouchStart = function(e) {\n    var t = (e.targetTouches) ? e.targetTouches[0] : e;\n    this.touchStartX = t.pageX;\n    this.touchStartY = t.pageY;\n};\n\nVirtualScroll.prototype._onTouchMove = function(e) {\n    var options = this.options;\n    if(options.preventTouch\n        && !e.target.classList.contains(options.unpreventTouchClass)) {\n        e.preventDefault();\n    }\n\n    var evt = this._event;\n\n    var t = (e.targetTouches) ? e.targetTouches[0] : e;\n\n    evt.deltaX = (t.pageX - this.touchStartX) * options.touchMultiplier;\n    evt.deltaY = (t.pageY - this.touchStartY) * options.touchMultiplier;\n\n    this.touchStartX = t.pageX;\n    this.touchStartY = t.pageY;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onKeyDown = function(e) {\n    var evt = this._event;\n    evt.deltaX = evt.deltaY = 0;\n    var windowHeight = window.innerHeight - 40;\n\n    switch(e.keyCode) {\n        case keyCodes.LEFT:\n        case keyCodes.UP:\n            evt.deltaY = this.options.keyStep;\n            break;\n\n        case keyCodes.RIGHT:\n        case keyCodes.DOWN:\n            evt.deltaY = - this.options.keyStep;\n            break;\n        case  e.shiftKey:\n            evt.deltaY = windowHeight;\n            break;\n        case keyCodes.SPACE:\n            evt.deltaY = - windowHeight;\n            break;\n        default:\n            return;\n    }\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._bind = function() {\n    if(support.hasWheelEvent) this.el.addEventListener('wheel', this._onWheel, this.listenerOptions);\n    if(support.hasMouseWheelEvent) this.el.addEventListener('mousewheel', this._onMouseWheel, this.listenerOptions);\n\n    if(support.hasTouch && this.options.useTouch) {\n        this.el.addEventListener('touchstart', this._onTouchStart, this.listenerOptions);\n        this.el.addEventListener('touchmove', this._onTouchMove, this.listenerOptions);\n    }\n\n    if(support.hasPointer && support.hasTouchWin) {\n        this.bodyTouchAction = document.body.style.msTouchAction;\n        document.body.style.msTouchAction = 'none';\n        this.el.addEventListener('MSPointerDown', this._onTouchStart, true);\n        this.el.addEventListener('MSPointerMove', this._onTouchMove, true);\n    }\n\n    if(support.hasKeyDown && this.options.useKeyboard) document.addEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype._unbind = function() {\n    if(support.hasWheelEvent) this.el.removeEventListener('wheel', this._onWheel);\n    if(support.hasMouseWheelEvent) this.el.removeEventListener('mousewheel', this._onMouseWheel);\n\n    if(support.hasTouch) {\n        this.el.removeEventListener('touchstart', this._onTouchStart);\n        this.el.removeEventListener('touchmove', this._onTouchMove);\n    }\n\n    if(support.hasPointer && support.hasTouchWin) {\n        document.body.style.msTouchAction = this.bodyTouchAction;\n        this.el.removeEventListener('MSPointerDown', this._onTouchStart, true);\n        this.el.removeEventListener('MSPointerMove', this._onTouchMove, true);\n    }\n\n    if(support.hasKeyDown && this.options.useKeyboard) document.removeEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype.on = function(cb, ctx) {\n  this._emitter.on(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (events && events[EVT_ID] && events[EVT_ID].length === 1) this._bind();\n};\n\nVirtualScroll.prototype.off = function(cb, ctx) {\n  this._emitter.off(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (!events[EVT_ID] || events[EVT_ID].length <= 0) this._unbind();\n};\n\nVirtualScroll.prototype.reset = function() {\n    var evt = this._event;\n    evt.x = 0;\n    evt.y = 0;\n};\n\nVirtualScroll.prototype.destroy = function() {\n    this._emitter.off();\n    this._unbind();\n};\n\nfunction lerp(start, end, amt) {\n  return (1 - amt) * start + amt * end;\n}\n\nfunction getTranslate(el) {\n  var translate = {};\n  if (!window.getComputedStyle) return;\n  var style = getComputedStyle(el);\n  var transform = style.transform || style.webkitTransform || style.mozTransform;\n  var mat = transform.match(/^matrix3d\\((.+)\\)$/);\n\n  if (mat) {\n    translate.x = mat ? parseFloat(mat[1].split(', ')[12]) : 0;\n    translate.y = mat ? parseFloat(mat[1].split(', ')[13]) : 0;\n  } else {\n    mat = transform.match(/^matrix\\((.+)\\)$/);\n    translate.x = mat ? parseFloat(mat[1].split(', ')[4]) : 0;\n    translate.y = mat ? parseFloat(mat[1].split(', ')[5]) : 0;\n  }\n\n  return translate;\n}\n\n/**\n * Returns an array containing all the parent nodes of the given node\n * @param  {object} node\n * @return {array} parent nodes\n */\nfunction getParents(elem) {\n  // Set up a parent array\n  var parents = []; // Push each parent element to the array\n\n  for (; elem && elem !== document; elem = elem.parentNode) {\n    parents.push(elem);\n  } // Return our parent array\n\n\n  return parents;\n} // https://gomakethings.com/how-to-get-the-closest-parent-element-with-a-matching-selector-using-vanilla-javascript/\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nvar src$1 = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n\nvar keyCodes$1 = {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  SPACE: 32,\n  TAB: 9,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  HOME: 36,\n  END: 35\n};\n\nvar _default$2 = /*#__PURE__*/function (_Core) {\n  _inherits(_default, _Core);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, _default);\n\n    if (history.scrollRestoration) {\n      history.scrollRestoration = 'manual';\n    }\n\n    window.scrollTo(0, 0);\n    _this = _super.call(this, options);\n    if (_this.inertia) _this.lerp = _this.inertia * 0.1;\n    _this.isScrolling = false;\n    _this.isDraggingScrollbar = false;\n    _this.isTicking = false;\n    _this.hasScrollTicking = false;\n    _this.parallaxElements = {};\n    _this.stop = false;\n    _this.scrollbarContainer = options.scrollbarContainer;\n    _this.checkKey = _this.checkKey.bind(_assertThisInitialized(_this));\n    window.addEventListener('keydown', _this.checkKey, false);\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      this.html.classList.add(this.smoothClass);\n      this.html.setAttribute(\"data-\".concat(this.name, \"-direction\"), this.direction);\n      this.instance = _objectSpread2({\n        delta: {\n          x: this.initPosition.x,\n          y: this.initPosition.y\n        },\n        scroll: {\n          x: this.initPosition.x,\n          y: this.initPosition.y\n        }\n      }, this.instance);\n      this.vs = new src({\n        el: this.scrollFromAnywhere ? document : this.el,\n        mouseMultiplier: navigator.platform.indexOf('Win') > -1 ? 1 : 0.4,\n        firefoxMultiplier: this.firefoxMultiplier,\n        touchMultiplier: this.touchMultiplier,\n        useKeyboard: false,\n        passive: true\n      });\n      this.vs.on(function (e) {\n        if (_this2.stop) {\n          return;\n        }\n\n        if (!_this2.isDraggingScrollbar) {\n          requestAnimationFrame(function () {\n            _this2.updateDelta(e);\n\n            if (!_this2.isScrolling) _this2.startScrolling();\n          });\n        }\n      });\n      this.setScrollLimit();\n      this.initScrollBar();\n      this.addSections();\n      this.addElements();\n      this.checkScroll(true);\n      this.transformElements(true, true);\n\n      _get(_getPrototypeOf(_default.prototype), \"init\", this).call(this);\n    }\n  }, {\n    key: \"setScrollLimit\",\n    value: function setScrollLimit() {\n      this.instance.limit.y = this.el.offsetHeight - this.windowHeight;\n\n      if (this.direction === 'horizontal') {\n        var totalWidth = 0;\n        var nodes = this.el.children;\n\n        for (var i = 0; i < nodes.length; i++) {\n          totalWidth += nodes[i].offsetWidth;\n        }\n\n        this.instance.limit.x = totalWidth - this.windowWidth;\n      }\n    }\n  }, {\n    key: \"startScrolling\",\n    value: function startScrolling() {\n      this.startScrollTs = Date.now(); // Record timestamp\n\n      this.isScrolling = true;\n      this.checkScroll();\n      this.html.classList.add(this.scrollingClass);\n    }\n  }, {\n    key: \"stopScrolling\",\n    value: function stopScrolling() {\n      cancelAnimationFrame(this.checkScrollRaf); // Prevent checkScroll to continue looping\n\n      if (this.scrollToRaf) {\n        cancelAnimationFrame(this.scrollToRaf);\n        this.scrollToRaf = null;\n      }\n\n      this.isScrolling = false;\n      this.instance.scroll.y = Math.round(this.instance.scroll.y);\n      this.html.classList.remove(this.scrollingClass);\n    }\n  }, {\n    key: \"checkKey\",\n    value: function checkKey(e) {\n      var _this3 = this;\n\n      if (this.stop) {\n        // If we are stopped, we don't want any scroll to occur because of a keypress\n        // Prevent tab to scroll to activeElement\n        if (e.keyCode == keyCodes$1.TAB) {\n          requestAnimationFrame(function () {\n            // Make sure native scroll is always at top of page\n            _this3.html.scrollTop = 0;\n            document.body.scrollTop = 0;\n            _this3.html.scrollLeft = 0;\n            document.body.scrollLeft = 0;\n          });\n        }\n\n        return;\n      }\n\n      switch (e.keyCode) {\n        case keyCodes$1.TAB:\n          // Do not remove the RAF\n          // It allows to override the browser's native scrollTo, which is essential\n          requestAnimationFrame(function () {\n            // Make sure native scroll is always at top of page\n            _this3.html.scrollTop = 0;\n            document.body.scrollTop = 0;\n            _this3.html.scrollLeft = 0;\n            document.body.scrollLeft = 0; // Request scrollTo on the focusedElement, putting it at the center of the screen\n\n            _this3.scrollTo(document.activeElement, {\n              offset: -window.innerHeight / 2\n            });\n          });\n          break;\n\n        case keyCodes$1.UP:\n          this.instance.delta[this.directionAxis] -= 240;\n          break;\n\n        case keyCodes$1.DOWN:\n          this.instance.delta[this.directionAxis] += 240;\n          break;\n\n        case keyCodes$1.PAGEUP:\n          this.instance.delta[this.directionAxis] -= window.innerHeight;\n          break;\n\n        case keyCodes$1.PAGEDOWN:\n          this.instance.delta[this.directionAxis] += window.innerHeight;\n          break;\n\n        case keyCodes$1.HOME:\n          this.instance.delta[this.directionAxis] -= this.instance.limit[this.directionAxis];\n          break;\n\n        case keyCodes$1.END:\n          this.instance.delta[this.directionAxis] += this.instance.limit[this.directionAxis];\n          break;\n\n        case keyCodes$1.SPACE:\n          if (!(document.activeElement instanceof HTMLInputElement) && !(document.activeElement instanceof HTMLTextAreaElement)) {\n            if (e.shiftKey) {\n              this.instance.delta[this.directionAxis] -= window.innerHeight;\n            } else {\n              this.instance.delta[this.directionAxis] += window.innerHeight;\n            }\n          }\n\n          break;\n\n        default:\n          return;\n      }\n\n      if (this.instance.delta[this.directionAxis] < 0) this.instance.delta[this.directionAxis] = 0;\n      if (this.instance.delta[this.directionAxis] > this.instance.limit[this.directionAxis]) this.instance.delta[this.directionAxis] = this.instance.limit[this.directionAxis];\n      this.stopScrolling(); // Stop any movement, allows to kill any other `scrollTo` still happening\n\n      this.isScrolling = true;\n      this.checkScroll();\n      this.html.classList.add(this.scrollingClass);\n    }\n  }, {\n    key: \"checkScroll\",\n    value: function checkScroll() {\n      var _this4 = this;\n\n      var forced = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (forced || this.isScrolling || this.isDraggingScrollbar) {\n        if (!this.hasScrollTicking) {\n          this.checkScrollRaf = requestAnimationFrame(function () {\n            return _this4.checkScroll();\n          });\n          this.hasScrollTicking = true;\n        }\n\n        this.updateScroll();\n        var distance = Math.abs(this.instance.delta[this.directionAxis] - this.instance.scroll[this.directionAxis]);\n        var timeSinceStart = Date.now() - this.startScrollTs; // Get the time since the scroll was started: the scroll can be stopped again only past 100ms\n\n        if (!this.animatingScroll && timeSinceStart > 100 && (distance < 0.5 && this.instance.delta[this.directionAxis] != 0 || distance < 0.5 && this.instance.delta[this.directionAxis] == 0)) {\n          this.stopScrolling();\n        }\n\n        Object.entries(this.sections).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              i = _ref2[0],\n              section = _ref2[1];\n\n          if (section.persistent || _this4.instance.scroll[_this4.directionAxis] > section.offset[_this4.directionAxis] && _this4.instance.scroll[_this4.directionAxis] < section.limit[_this4.directionAxis]) {\n            if (_this4.direction === 'horizontal') {\n              _this4.transform(section.el, -_this4.instance.scroll[_this4.directionAxis], 0);\n            } else {\n              _this4.transform(section.el, 0, -_this4.instance.scroll[_this4.directionAxis]);\n            }\n\n            if (!section.inView) {\n              section.inView = true;\n              section.el.style.opacity = 1;\n              section.el.style.pointerEvents = 'all';\n              section.el.setAttribute(\"data-\".concat(_this4.name, \"-section-inview\"), '');\n            }\n          } else {\n            if (section.inView || forced) {\n              section.inView = false;\n              section.el.style.opacity = 0;\n              section.el.style.pointerEvents = 'none';\n              section.el.removeAttribute(\"data-\".concat(_this4.name, \"-section-inview\"));\n            }\n\n            _this4.transform(section.el, 0, 0);\n          }\n        });\n\n        if (this.getDirection) {\n          this.addDirection();\n        }\n\n        if (this.getSpeed) {\n          this.addSpeed();\n          this.speedTs = Date.now();\n        }\n\n        this.detectElements();\n        this.transformElements();\n\n        if (this.hasScrollbar) {\n          var scrollBarTranslation = this.instance.scroll[this.directionAxis] / this.instance.limit[this.directionAxis] * this.scrollBarLimit[this.directionAxis];\n\n          if (this.direction === 'horizontal') {\n            this.transform(this.scrollbarThumb, scrollBarTranslation, 0);\n          } else {\n            this.transform(this.scrollbarThumb, 0, scrollBarTranslation);\n          }\n        }\n\n        _get(_getPrototypeOf(_default.prototype), \"checkScroll\", this).call(this);\n\n        this.hasScrollTicking = false;\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      this.windowHeight = window.innerHeight;\n      this.windowWidth = window.innerWidth;\n      this.checkContext();\n      this.windowMiddle = {\n        x: this.windowWidth / 2,\n        y: this.windowHeight / 2\n      };\n      this.update();\n    }\n  }, {\n    key: \"updateDelta\",\n    value: function updateDelta(e) {\n      var delta;\n      var gestureDirection = this[this.context] && this[this.context].gestureDirection ? this[this.context].gestureDirection : this.gestureDirection;\n\n      if (gestureDirection === 'both') {\n        delta = e.deltaX + e.deltaY;\n      } else if (gestureDirection === 'vertical') {\n        delta = e.deltaY;\n      } else if (gestureDirection === 'horizontal') {\n        delta = e.deltaX;\n      } else {\n        delta = e.deltaY;\n      }\n\n      this.instance.delta[this.directionAxis] -= delta * this.multiplier;\n      if (this.instance.delta[this.directionAxis] < 0) this.instance.delta[this.directionAxis] = 0;\n      if (this.instance.delta[this.directionAxis] > this.instance.limit[this.directionAxis]) this.instance.delta[this.directionAxis] = this.instance.limit[this.directionAxis];\n    }\n  }, {\n    key: \"updateScroll\",\n    value: function updateScroll(e) {\n      if (this.isScrolling || this.isDraggingScrollbar) {\n        this.instance.scroll[this.directionAxis] = lerp(this.instance.scroll[this.directionAxis], this.instance.delta[this.directionAxis], this.lerp);\n      } else {\n        if (this.instance.scroll[this.directionAxis] > this.instance.limit[this.directionAxis]) {\n          this.setScroll(this.instance.scroll[this.directionAxis], this.instance.limit[this.directionAxis]);\n        } else if (this.instance.scroll.y < 0) {\n          this.setScroll(this.instance.scroll[this.directionAxis], 0);\n        } else {\n          this.setScroll(this.instance.scroll[this.directionAxis], this.instance.delta[this.directionAxis]);\n        }\n      }\n    }\n  }, {\n    key: \"addDirection\",\n    value: function addDirection() {\n      if (this.instance.delta.y > this.instance.scroll.y) {\n        if (this.instance.direction !== 'down') {\n          this.instance.direction = 'down';\n        }\n      } else if (this.instance.delta.y < this.instance.scroll.y) {\n        if (this.instance.direction !== 'up') {\n          this.instance.direction = 'up';\n        }\n      }\n\n      if (this.instance.delta.x > this.instance.scroll.x) {\n        if (this.instance.direction !== 'right') {\n          this.instance.direction = 'right';\n        }\n      } else if (this.instance.delta.x < this.instance.scroll.x) {\n        if (this.instance.direction !== 'left') {\n          this.instance.direction = 'left';\n        }\n      }\n    }\n  }, {\n    key: \"addSpeed\",\n    value: function addSpeed() {\n      if (this.instance.delta[this.directionAxis] != this.instance.scroll[this.directionAxis]) {\n        this.instance.speed = (this.instance.delta[this.directionAxis] - this.instance.scroll[this.directionAxis]) / Math.max(1, Date.now() - this.speedTs);\n      } else {\n        this.instance.speed = 0;\n      }\n    }\n  }, {\n    key: \"initScrollBar\",\n    value: function initScrollBar() {\n      this.scrollbar = document.createElement('span');\n      this.scrollbarThumb = document.createElement('span');\n      this.scrollbar.classList.add(\"\".concat(this.scrollbarClass));\n      this.scrollbarThumb.classList.add(\"\".concat(this.scrollbarClass, \"_thumb\"));\n      this.scrollbar.append(this.scrollbarThumb);\n\n      if (this.scrollbarContainer) {\n        this.scrollbarContainer.append(this.scrollbar);\n      } else {\n        document.body.append(this.scrollbar);\n      } // Scrollbar Events\n\n\n      this.getScrollBar = this.getScrollBar.bind(this);\n      this.releaseScrollBar = this.releaseScrollBar.bind(this);\n      this.moveScrollBar = this.moveScrollBar.bind(this);\n      this.scrollbarThumb.addEventListener('mousedown', this.getScrollBar);\n      window.addEventListener('mouseup', this.releaseScrollBar);\n      window.addEventListener('mousemove', this.moveScrollBar); // Set scrollbar values\n\n      this.hasScrollbar = false;\n\n      if (this.direction == 'horizontal') {\n        if (this.instance.limit.x + this.windowWidth <= this.windowWidth) {\n          return;\n        }\n      } else {\n        if (this.instance.limit.y + this.windowHeight <= this.windowHeight) {\n          return;\n        }\n      }\n\n      this.hasScrollbar = true;\n      this.scrollbarBCR = this.scrollbar.getBoundingClientRect();\n      this.scrollbarHeight = this.scrollbarBCR.height;\n      this.scrollbarWidth = this.scrollbarBCR.width;\n\n      if (this.direction === 'horizontal') {\n        this.scrollbarThumb.style.width = \"\".concat(this.scrollbarWidth * this.scrollbarWidth / (this.instance.limit.x + this.scrollbarWidth), \"px\");\n      } else {\n        this.scrollbarThumb.style.height = \"\".concat(this.scrollbarHeight * this.scrollbarHeight / (this.instance.limit.y + this.scrollbarHeight), \"px\");\n      }\n\n      this.scrollbarThumbBCR = this.scrollbarThumb.getBoundingClientRect();\n      this.scrollBarLimit = {\n        x: this.scrollbarWidth - this.scrollbarThumbBCR.width,\n        y: this.scrollbarHeight - this.scrollbarThumbBCR.height\n      };\n    }\n  }, {\n    key: \"reinitScrollBar\",\n    value: function reinitScrollBar() {\n      this.hasScrollbar = false;\n\n      if (this.direction == 'horizontal') {\n        if (this.instance.limit.x + this.windowWidth <= this.windowWidth) {\n          return;\n        }\n      } else {\n        if (this.instance.limit.y + this.windowHeight <= this.windowHeight) {\n          return;\n        }\n      }\n\n      this.hasScrollbar = true;\n      this.scrollbarBCR = this.scrollbar.getBoundingClientRect();\n      this.scrollbarHeight = this.scrollbarBCR.height;\n      this.scrollbarWidth = this.scrollbarBCR.width;\n\n      if (this.direction === 'horizontal') {\n        this.scrollbarThumb.style.width = \"\".concat(this.scrollbarWidth * this.scrollbarWidth / (this.instance.limit.x + this.scrollbarWidth), \"px\");\n      } else {\n        this.scrollbarThumb.style.height = \"\".concat(this.scrollbarHeight * this.scrollbarHeight / (this.instance.limit.y + this.scrollbarHeight), \"px\");\n      }\n\n      this.scrollbarThumbBCR = this.scrollbarThumb.getBoundingClientRect();\n      this.scrollBarLimit = {\n        x: this.scrollbarWidth - this.scrollbarThumbBCR.width,\n        y: this.scrollbarHeight - this.scrollbarThumbBCR.height\n      };\n    }\n  }, {\n    key: \"destroyScrollBar\",\n    value: function destroyScrollBar() {\n      this.scrollbarThumb.removeEventListener('mousedown', this.getScrollBar);\n      window.removeEventListener('mouseup', this.releaseScrollBar);\n      window.removeEventListener('mousemove', this.moveScrollBar);\n      this.scrollbar.remove();\n    }\n  }, {\n    key: \"getScrollBar\",\n    value: function getScrollBar(e) {\n      this.isDraggingScrollbar = true;\n      this.checkScroll();\n      this.html.classList.remove(this.scrollingClass);\n      this.html.classList.add(this.draggingClass);\n    }\n  }, {\n    key: \"releaseScrollBar\",\n    value: function releaseScrollBar(e) {\n      this.isDraggingScrollbar = false;\n      this.html.classList.add(this.scrollingClass);\n      this.html.classList.remove(this.draggingClass);\n    }\n  }, {\n    key: \"moveScrollBar\",\n    value: function moveScrollBar(e) {\n      var _this5 = this;\n\n      if (this.isDraggingScrollbar) {\n        requestAnimationFrame(function () {\n          var x = (e.clientX - _this5.scrollbarBCR.left) * 100 / _this5.scrollbarWidth * _this5.instance.limit.x / 100;\n          var y = (e.clientY - _this5.scrollbarBCR.top) * 100 / _this5.scrollbarHeight * _this5.instance.limit.y / 100;\n\n          if (y > 0 && y < _this5.instance.limit.y) {\n            _this5.instance.delta.y = y;\n          }\n\n          if (x > 0 && x < _this5.instance.limit.x) {\n            _this5.instance.delta.x = x;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"addElements\",\n    value: function addElements() {\n      var _this6 = this;\n\n      this.els = {};\n      this.parallaxElements = {}; // this.sections.forEach((section, y) => {\n\n      var els = this.el.querySelectorAll(\"[data-\".concat(this.name, \"]\"));\n      els.forEach(function (el, index) {\n        // Try and find the target's parent section\n        var targetParents = getParents(el);\n        var section = Object.entries(_this6.sections).map(function (_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n              key = _ref4[0],\n              section = _ref4[1];\n\n          return section;\n        }).find(function (section) {\n          return targetParents.includes(section.el);\n        });\n        var cl = el.dataset[_this6.name + 'Class'] || _this6[\"class\"];\n        var id = typeof el.dataset[_this6.name + 'Id'] === 'string' ? el.dataset[_this6.name + 'Id'] : 'el' + index;\n        var top;\n        var left;\n        var repeat = el.dataset[_this6.name + 'Repeat'];\n        var call = el.dataset[_this6.name + 'Call'];\n        var position = el.dataset[_this6.name + 'Position'];\n        var delay = el.dataset[_this6.name + 'Delay'];\n        var direction = el.dataset[_this6.name + 'Direction'];\n        var sticky = typeof el.dataset[_this6.name + 'Sticky'] === 'string';\n        var speed = el.dataset[_this6.name + 'Speed'] ? parseFloat(el.dataset[_this6.name + 'Speed']) / 10 : false;\n        var offset = typeof el.dataset[_this6.name + 'Offset'] === 'string' ? el.dataset[_this6.name + 'Offset'].split(',') : _this6.offset;\n        var target = el.dataset[_this6.name + 'Target'];\n        var targetEl;\n\n        if (target !== undefined) {\n          targetEl = document.querySelector(\"\".concat(target));\n        } else {\n          targetEl = el;\n        }\n\n        var targetElBCR = targetEl.getBoundingClientRect();\n\n        if (section === null) {\n          top = targetElBCR.top + _this6.instance.scroll.y - getTranslate(targetEl).y;\n          left = targetElBCR.left + _this6.instance.scroll.x - getTranslate(targetEl).x;\n        } else {\n          if (!section.inView) {\n            top = targetElBCR.top - getTranslate(section.el).y - getTranslate(targetEl).y;\n            left = targetElBCR.left - getTranslate(section.el).x - getTranslate(targetEl).x;\n          } else {\n            top = targetElBCR.top + _this6.instance.scroll.y - getTranslate(targetEl).y;\n            left = targetElBCR.left + _this6.instance.scroll.x - getTranslate(targetEl).x;\n          }\n        }\n\n        var bottom = top + targetEl.offsetHeight;\n        var right = left + targetEl.offsetWidth;\n        var middle = {\n          x: (right - left) / 2 + left,\n          y: (bottom - top) / 2 + top\n        };\n\n        if (sticky) {\n          var elBCR = el.getBoundingClientRect();\n          var elTop = elBCR.top;\n          var elLeft = elBCR.left;\n          var elDistance = {\n            x: elLeft - left,\n            y: elTop - top\n          };\n          top += window.innerHeight;\n          left += window.innerWidth;\n          bottom = elTop + targetEl.offsetHeight - el.offsetHeight - elDistance[_this6.directionAxis];\n          right = elLeft + targetEl.offsetWidth - el.offsetWidth - elDistance[_this6.directionAxis];\n          middle = {\n            x: (right - left) / 2 + left,\n            y: (bottom - top) / 2 + top\n          };\n        }\n\n        if (repeat == 'false') {\n          repeat = false;\n        } else if (repeat != undefined) {\n          repeat = true;\n        } else {\n          repeat = _this6.repeat;\n        }\n\n        var relativeOffset = [0, 0];\n\n        if (offset) {\n          if (_this6.direction === 'horizontal') {\n            for (var i = 0; i < offset.length; i++) {\n              if (typeof offset[i] == 'string') {\n                if (offset[i].includes('%')) {\n                  relativeOffset[i] = parseInt(offset[i].replace('%', '') * _this6.windowWidth / 100);\n                } else {\n                  relativeOffset[i] = parseInt(offset[i]);\n                }\n              } else {\n                relativeOffset[i] = offset[i];\n              }\n            }\n\n            left = left + relativeOffset[0];\n            right = right - relativeOffset[1];\n          } else {\n            for (var i = 0; i < offset.length; i++) {\n              if (typeof offset[i] == 'string') {\n                if (offset[i].includes('%')) {\n                  relativeOffset[i] = parseInt(offset[i].replace('%', '') * _this6.windowHeight / 100);\n                } else {\n                  relativeOffset[i] = parseInt(offset[i]);\n                }\n              } else {\n                relativeOffset[i] = offset[i];\n              }\n            }\n\n            top = top + relativeOffset[0];\n            bottom = bottom - relativeOffset[1];\n          }\n        }\n\n        var mappedEl = {\n          el: el,\n          id: id,\n          \"class\": cl,\n          section: section,\n          top: top,\n          middle: middle,\n          bottom: bottom,\n          left: left,\n          right: right,\n          offset: offset,\n          progress: 0,\n          repeat: repeat,\n          inView: false,\n          call: call,\n          speed: speed,\n          delay: delay,\n          position: position,\n          target: targetEl,\n          direction: direction,\n          sticky: sticky\n        };\n        _this6.els[id] = mappedEl;\n\n        if (el.classList.contains(cl)) {\n          _this6.setInView(_this6.els[id], id);\n        }\n\n        if (speed !== false || sticky) {\n          _this6.parallaxElements[id] = mappedEl;\n        }\n      }); // });\n    }\n  }, {\n    key: \"addSections\",\n    value: function addSections() {\n      var _this7 = this;\n\n      this.sections = {};\n      var sections = this.el.querySelectorAll(\"[data-\".concat(this.name, \"-section]\"));\n\n      if (sections.length === 0) {\n        sections = [this.el];\n      }\n\n      sections.forEach(function (section, index) {\n        var id = typeof section.dataset[_this7.name + 'Id'] === 'string' ? section.dataset[_this7.name + 'Id'] : 'section' + index;\n        var sectionBCR = section.getBoundingClientRect();\n        var offset = {\n          x: sectionBCR.left - window.innerWidth * 1.5 - getTranslate(section).x,\n          y: sectionBCR.top - window.innerHeight * 1.5 - getTranslate(section).y\n        };\n        var limit = {\n          x: offset.x + sectionBCR.width + window.innerWidth * 2,\n          y: offset.y + sectionBCR.height + window.innerHeight * 2\n        };\n        var persistent = typeof section.dataset[_this7.name + 'Persistent'] === 'string';\n        section.setAttribute('data-scroll-section-id', id);\n        var mappedSection = {\n          el: section,\n          offset: offset,\n          limit: limit,\n          inView: false,\n          persistent: persistent,\n          id: id\n        };\n        _this7.sections[id] = mappedSection;\n      });\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(element, x, y, delay) {\n      var transform;\n\n      if (!delay) {\n        transform = \"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,\".concat(x, \",\").concat(y, \",0,1)\");\n      } else {\n        var start = getTranslate(element);\n        var lerpX = lerp(start.x, x, delay);\n        var lerpY = lerp(start.y, y, delay);\n        transform = \"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,\".concat(lerpX, \",\").concat(lerpY, \",0,1)\");\n      }\n\n      element.style.webkitTransform = transform;\n      element.style.msTransform = transform;\n      element.style.transform = transform;\n    }\n  }, {\n    key: \"transformElements\",\n    value: function transformElements(isForced) {\n      var _this8 = this;\n\n      var setAllElements = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var scrollRight = this.instance.scroll.x + this.windowWidth;\n      var scrollBottom = this.instance.scroll.y + this.windowHeight;\n      var scrollMiddle = {\n        x: this.instance.scroll.x + this.windowMiddle.x,\n        y: this.instance.scroll.y + this.windowMiddle.y\n      };\n      Object.entries(this.parallaxElements).forEach(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            i = _ref6[0],\n            current = _ref6[1];\n\n        var transformDistance = false;\n\n        if (isForced) {\n          transformDistance = 0;\n        }\n\n        if (current.inView || setAllElements) {\n          switch (current.position) {\n            case 'top':\n              transformDistance = _this8.instance.scroll[_this8.directionAxis] * -current.speed;\n              break;\n\n            case 'elementTop':\n              transformDistance = (scrollBottom - current.top) * -current.speed;\n              break;\n\n            case 'bottom':\n              transformDistance = (_this8.instance.limit[_this8.directionAxis] - scrollBottom + _this8.windowHeight) * current.speed;\n              break;\n\n            case 'left':\n              transformDistance = _this8.instance.scroll[_this8.directionAxis] * -current.speed;\n              break;\n\n            case 'elementLeft':\n              transformDistance = (scrollRight - current.left) * -current.speed;\n              break;\n\n            case 'right':\n              transformDistance = (_this8.instance.limit[_this8.directionAxis] - scrollRight + _this8.windowHeight) * current.speed;\n              break;\n\n            default:\n              transformDistance = (scrollMiddle[_this8.directionAxis] - current.middle[_this8.directionAxis]) * -current.speed;\n              break;\n          }\n        }\n\n        if (current.sticky) {\n          if (current.inView) {\n            if (_this8.direction === 'horizontal') {\n              transformDistance = _this8.instance.scroll.x - current.left + window.innerWidth;\n            } else {\n              transformDistance = _this8.instance.scroll.y - current.top + window.innerHeight;\n            }\n          } else {\n            if (_this8.direction === 'horizontal') {\n              if (_this8.instance.scroll.x < current.left - window.innerWidth && _this8.instance.scroll.x < current.left - window.innerWidth / 2) {\n                transformDistance = 0;\n              } else if (_this8.instance.scroll.x > current.right && _this8.instance.scroll.x > current.right + 100) {\n                transformDistance = current.right - current.left + window.innerWidth;\n              } else {\n                transformDistance = false;\n              }\n            } else {\n              if (_this8.instance.scroll.y < current.top - window.innerHeight && _this8.instance.scroll.y < current.top - window.innerHeight / 2) {\n                transformDistance = 0;\n              } else if (_this8.instance.scroll.y > current.bottom && _this8.instance.scroll.y > current.bottom + 100) {\n                transformDistance = current.bottom - current.top + window.innerHeight;\n              } else {\n                transformDistance = false;\n              }\n            }\n          }\n        }\n\n        if (transformDistance !== false) {\n          if (current.direction === 'horizontal' || _this8.direction === 'horizontal' && current.direction !== 'vertical') {\n            _this8.transform(current.el, transformDistance, 0, isForced ? false : current.delay);\n          } else {\n            _this8.transform(current.el, 0, transformDistance, isForced ? false : current.delay);\n          }\n        }\n      });\n    }\n    /**\n     * Scroll to a desired target.\n     *\n     * @param  Available options :\n     *          target {node, string, \"top\", \"bottom\", int} - The DOM element we want to scroll to\n     *          options {object} - Options object for additionnal settings.\n     * @return {void}\n     */\n\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(target) {\n      var _this9 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      // Parse options\n      var offset = parseInt(options.offset) || 0; // An offset to apply on top of given `target` or `sourceElem`'s target\n\n      var duration = !isNaN(parseInt(options.duration)) ? parseInt(options.duration) : 1000; // Duration of the scroll animation in milliseconds\n\n      var easing = options.easing || [0.25, 0.0, 0.35, 1.0]; // An array of 4 floats between 0 and 1 defining the bezier curve for the animation's easing. See http://greweb.me/bezier-easing-editor/example/\n\n      var disableLerp = options.disableLerp ? true : false; // Lerp effect won't be applied if set to true\n\n      var callback = options.callback ? options.callback : false; // function called when scrollTo completes (note that it won't wait for lerp to stabilize)\n\n      easing = src$1.apply(void 0, _toConsumableArray(easing));\n\n      if (typeof target === 'string') {\n        // Selector or boundaries\n        if (target === 'top') {\n          target = 0;\n        } else if (target === 'bottom') {\n          target = this.instance.limit.y;\n        } else if (target === 'left') {\n          target = 0;\n        } else if (target === 'right') {\n          target = this.instance.limit.x;\n        } else {\n          target = document.querySelector(target); // If the query fails, abort\n\n          if (!target) {\n            return;\n          }\n        }\n      } else if (typeof target === 'number') {\n        // Absolute coordinate\n        target = parseInt(target);\n      } else if (target && target.tagName) ; else {\n        console.warn('`target` parameter is not valid');\n        return;\n      } // We have a target that is not a coordinate yet, get it\n\n\n      if (typeof target !== 'number') {\n        // Verify the given target belongs to this scroll scope\n        var targetInScope = getParents(target).includes(this.el);\n\n        if (!targetInScope) {\n          // If the target isn't inside our main element, abort any action\n          return;\n        } // Get target offset from top\n\n\n        var targetBCR = target.getBoundingClientRect();\n        var offsetTop = targetBCR.top;\n        var offsetLeft = targetBCR.left; // Try and find the target's parent section\n\n        var targetParents = getParents(target);\n        var parentSection = targetParents.find(function (candidate) {\n          return Object.entries(_this9.sections) // Get sections associative array as a regular array\n          .map(function (_ref7) {\n            var _ref8 = _slicedToArray(_ref7, 2),\n                key = _ref8[0],\n                section = _ref8[1];\n\n            return section;\n          }) // map to section only (we dont need the key here)\n          .find(function (section) {\n            return section.el == candidate;\n          }); // finally find the section that matches the candidate\n        });\n        var parentSectionOffset = 0;\n\n        if (parentSection) {\n          parentSectionOffset = getTranslate(parentSection)[this.directionAxis]; // We got a parent section, store it's current offset to remove it later\n        } else {\n          // if no parent section is found we need to use instance scroll directly\n          parentSectionOffset = -this.instance.scroll[this.directionAxis];\n        } // Final value of scroll destination : offsetTop + (optional offset given in options) - (parent's section translate)\n\n\n        if (this.direction === 'horizontal') {\n          offset = offsetLeft + offset - parentSectionOffset;\n        } else {\n          offset = offsetTop + offset - parentSectionOffset;\n        }\n      } else {\n        offset = target + offset;\n      } // Actual scrollto\n      // ==========================================================================\n      // Setup\n\n\n      var scrollStart = parseFloat(this.instance.delta[this.directionAxis]);\n      var scrollTarget = Math.max(0, Math.min(offset, this.instance.limit[this.directionAxis])); // Make sure our target is in the scroll boundaries\n\n      var scrollDiff = scrollTarget - scrollStart;\n\n      var render = function render(p) {\n        if (disableLerp) {\n          if (_this9.direction === 'horizontal') {\n            _this9.setScroll(scrollStart + scrollDiff * p, _this9.instance.delta.y);\n          } else {\n            _this9.setScroll(_this9.instance.delta.x, scrollStart + scrollDiff * p);\n          }\n        } else {\n          _this9.instance.delta[_this9.directionAxis] = scrollStart + scrollDiff * p;\n        }\n      }; // Prepare the scroll\n\n\n      this.animatingScroll = true; // This boolean allows to prevent `checkScroll()` from calling `stopScrolling` when the animation is slow (i.e. at the beginning of an EaseIn)\n\n      this.stopScrolling(); // Stop any movement, allows to kill any other `scrollTo` still happening\n\n      this.startScrolling(); // Restart the scroll\n      // Start the animation loop\n\n      var start = Date.now();\n\n      var loop = function loop() {\n        var p = (Date.now() - start) / duration; // Animation progress\n\n        if (p > 1) {\n          // Animation ends\n          render(1);\n          _this9.animatingScroll = false;\n          if (duration == 0) _this9.update();\n          if (callback) callback();\n        } else {\n          _this9.scrollToRaf = requestAnimationFrame(loop);\n          render(easing(p));\n        }\n      };\n\n      loop();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.setScrollLimit();\n      this.addSections();\n      this.addElements();\n      this.detectElements();\n      this.updateScroll();\n      this.transformElements(true);\n      this.reinitScrollBar();\n      this.checkScroll(true);\n    }\n  }, {\n    key: \"startScroll\",\n    value: function startScroll() {\n      this.stop = false;\n    }\n  }, {\n    key: \"stopScroll\",\n    value: function stopScroll() {\n      this.stop = true;\n    }\n  }, {\n    key: \"setScroll\",\n    value: function setScroll(x, y) {\n      this.instance = _objectSpread2(_objectSpread2({}, this.instance), {}, {\n        scroll: {\n          x: x,\n          y: y\n        },\n        delta: {\n          x: x,\n          y: y\n        },\n        speed: 0\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(_default.prototype), \"destroy\", this).call(this);\n\n      this.stopScrolling();\n      this.html.classList.remove(this.smoothClass);\n      this.vs.destroy();\n      this.destroyScrollBar();\n      window.removeEventListener('keydown', this.checkKey, false);\n    }\n  }]);\n\n  return _default;\n}(_default);\n\nvar Smooth = /*#__PURE__*/function () {\n  function Smooth() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Smooth);\n\n    this.options = options; // Override default options with given ones\n\n    Object.assign(this, defaults, options);\n    this.smartphone = defaults.smartphone;\n    if (options.smartphone) Object.assign(this.smartphone, options.smartphone);\n    this.tablet = defaults.tablet;\n    if (options.tablet) Object.assign(this.tablet, options.tablet);\n    if (!this.smooth && this.direction == 'horizontal') console.warn(' `smooth:false` & `horizontal` direction are not yet compatible');\n    if (!this.tablet.smooth && this.tablet.direction == 'horizontal') console.warn(' `smooth:false` & `horizontal` direction are not yet compatible (tablet)');\n    if (!this.smartphone.smooth && this.smartphone.direction == 'horizontal') console.warn(' `smooth:false` & `horizontal` direction are not yet compatible (smartphone)');\n    this.init();\n  }\n\n  _createClass(Smooth, [{\n    key: \"init\",\n    value: function init() {\n      this.options.isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 || window.innerWidth < this.tablet.breakpoint;\n      this.options.isTablet = this.options.isMobile && window.innerWidth >= this.tablet.breakpoint;\n\n      if (this.smooth && !this.options.isMobile || this.tablet.smooth && this.options.isTablet || this.smartphone.smooth && this.options.isMobile && !this.options.isTablet) {\n        this.scroll = new _default$2(this.options);\n      } else {\n        this.scroll = new _default$1(this.options);\n      }\n\n      this.scroll.init();\n\n      if (window.location.hash) {\n        // Get the hash without the '#' and find the matching element\n        var id = window.location.hash.slice(1, window.location.hash.length);\n        var target = document.getElementById(id); // If found, scroll to the element\n\n        if (target) this.scroll.scrollTo(target);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.scroll.update();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.scroll.startScroll();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.scroll.stopScroll();\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(target, options) {\n      this.scroll.scrollTo(target, options);\n    }\n  }, {\n    key: \"setScroll\",\n    value: function setScroll(x, y) {\n      this.scroll.setScroll(x, y);\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, func) {\n      this.scroll.setEvents(event, func);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, func) {\n      this.scroll.unsetEvents(event, func);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.scroll.destroy();\n    }\n  }]);\n\n  return Smooth;\n}();\n\nvar Native = /*#__PURE__*/function () {\n  function Native() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Native);\n\n    this.options = options; // Override default options with given ones\n\n    Object.assign(this, defaults, options);\n    this.smartphone = defaults.smartphone;\n    if (options.smartphone) Object.assign(this.smartphone, options.smartphone);\n    this.tablet = defaults.tablet;\n    if (options.tablet) Object.assign(this.tablet, options.tablet);\n    this.init();\n  }\n\n  _createClass(Native, [{\n    key: \"init\",\n    value: function init() {\n      this.scroll = new _default$1(this.options);\n      this.scroll.init();\n\n      if (window.location.hash) {\n        // Get the hash without the '#' and find the matching element\n        var id = window.location.hash.slice(1, window.location.hash.length);\n        var target = document.getElementById(id); // If found, scroll to the element\n\n        if (target) this.scroll.scrollTo(target);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.scroll.update();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.scroll.startScroll();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.scroll.stopScroll();\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(target, options) {\n      this.scroll.scrollTo(target, options);\n    }\n  }, {\n    key: \"setScroll\",\n    value: function setScroll(x, y) {\n      this.scroll.setScroll(x, y);\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, func) {\n      this.scroll.setEvents(event, func);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, func) {\n      this.scroll.unsetEvents(event, func);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.scroll.destroy();\n    }\n  }]);\n\n  return Native;\n}();\n\nexport default Smooth;\nexport { Native, Smooth };\n","// Map number x from range [a, b] to [c, d]\nconst map = (x, a, b, c, d) => (x - a) * (d - c) / (b - a) + c;\n\n// Linear interpolation\nconst lerp = (a, b, n) => (1 - n) * a + n * b;\n\nconst clamp = (num, min, max) => num <= min ? min : num >= max ? max : num;\n\n// Gets the mouse position\nconst getMousePos = (e) => {\n    let posx = 0;\n    let posy = 0;\n    if (!e) e = window.event;\n    if (e.pageX || e.pageY) {\n        posx = e.pageX;\n        posy = e.pageY;\n    }\n    else if (e.clientX || e.clientY)    {\n        posx = e.clientX + body.scrollLeft + document.documentElement.scrollLeft;\n        posy = e.clientY + body.scrollTop + document.documentElement.scrollTop;\n    }\n\n    return { x : posx, y : posy }\n};\n\nexport { map, lerp, clamp, getMousePos };\n","/*\n * anime.js v3.2.1\n * (c) 2020 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective', 'matrix', 'matrix3d'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  nil: function (a) { return is.und(a) || a === null; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; },\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.ceil((minMax(t, 0.000001, 1)) * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)\n\n  var eases = { linear: function () { return function (t) { return t; }; } };\n\n  var functionEasings = {\n    Sine: function () { return function (t) { return 1 - Math.cos(t * Math.PI / 2); }; },\n    Circ: function () { return function (t) { return 1 - Math.sqrt(1 - t * t); }; },\n    Back: function () { return function (t) { return t * t * (3 * t - 2); }; },\n    Bounce: function () { return function (t) {\n      var pow2, b = 4;\n      while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}\n      return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2)\n    }; },\n    Elastic: function (amplitude, period) {\n      if ( amplitude === void 0 ) amplitude = 1;\n      if ( period === void 0 ) period = .5;\n\n      var a = minMax(amplitude, 1, 10);\n      var p = minMax(period, .1, 2);\n      return function (t) {\n        return (t === 0 || t === 1) ? t : \n          -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n      }\n    }\n  };\n\n  var baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];\n\n  baseEasings.forEach(function (name, i) {\n    functionEasings[name] = function () { return function (t) { return Math.pow(t, i + 2); }; };\n  });\n\n  Object.keys(functionEasings).forEach(function (name) {\n    var easeIn = functionEasings[name];\n    eases['easeIn' + name] = easeIn;\n    eases['easeOut' + name] = function (a, b) { return function (t) { return 1 - easeIn(a, b)(1 - t); }; };\n    eases['easeInOut' + name] = function (a, b) { return function (t) { return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : \n      1 - easeIn(a, b)(t * -2 + 2) / 2; }; };\n    eases['easeOutIn' + name] = function (a, b) { return function (t) { return t < 0.5 ? (1 - easeIn(a, b)(1 - t * 2)) / 2 : \n      (easeIn(a, b)(t * 2 - 1) + 1) / 2; }; };\n  });\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return applyArguments(ease, args);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[1]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (!is.nil(getAttribute(el, prop)) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  if (/\\s/g.test(val)) { return val; }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  if (unit) { return unitLess + unit; }\n  return unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    if (!is.svg(parentEl.parentNode)) { break; }\n    parentEl = parentEl.parentNode;\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width,\n    h: height,\n    vW: viewBox[2],\n    vH: viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress, isPathTargetInsideSVG) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  var scaleX = isPathTargetInsideSVG ? 1 : svg.w / svg.vW;\n  var scaleY = isPathTargetInsideSVG ? 1 : svg.h / svg.vH;\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * scaleX;\n    case 'y': return (p.y - svg.y) * scaleY;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  // const rgx = /-?\\d*\\.?\\d+/g; // handles basic numbers\n  // const rgx = /[+-]?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var rgx = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isPathTargetInsideSVG = tween.isPath && is.svg(animatable.target);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\n\nvar engine = (function () {\n  var raf;\n\n  function play() {\n    if (!raf && (!isDocumentHidden() || !anime.suspendWhenDocumentHidden) && activeInstances.length > 0) {\n      raf = requestAnimationFrame(step);\n    }\n  }\n  function step(t) {\n    // memo on algorithm issue:\n    // dangerous iteration over mutable `activeInstances`\n    // (that collection may be updated from within callbacks of `tick`-ed animation instances)\n    var activeInstancesLength = activeInstances.length;\n    var i = 0;\n    while (i < activeInstancesLength) {\n      var activeInstance = activeInstances[i];\n      if (!activeInstance.paused) {\n        activeInstance.tick(t);\n        i++;\n      } else {\n        activeInstances.splice(i, 1);\n        activeInstancesLength--;\n      }\n    }\n    raf = i > 0 ? requestAnimationFrame(step) : undefined;\n  }\n\n  function handleVisibilityChange() {\n    if (!anime.suspendWhenDocumentHidden) { return; }\n\n    if (isDocumentHidden()) {\n      // suspend ticks\n      raf = cancelAnimationFrame(raf);\n    } else { // is back to active tab\n      // first adjust animations to consider the time that ticks were suspended\n      activeInstances.forEach(\n        function (instance) { return instance ._onDocumentVisibility(); }\n      );\n      engine();\n    }\n  }\n  if (typeof document !== 'undefined') {\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n  }\n\n  return play;\n})();\n\nfunction isDocumentHidden() {\n  return !!document && document.hidden;\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekChild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekChild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekChild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber, tween.isPathTargetInsideSVG);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n    }\n    if (!instance.loopBegan && instance.currentTime > 0) {\n      instance.loopBegan = true;\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (!instance.remaining) {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      } else {\n        startTime = now;\n        setCallback('loopComplete');\n        instance.loopBegan = false;\n        if (instance.direction === 'alternate') {\n          toggleInstanceDirection();\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.loopBegan = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(instance.reversed ? instance.duration : 0);\n  };\n\n  // internal method (for engine) to adjust animation timings before restoring engine ticks (rAF)\n  instance._onDocumentVisibility = resetTime;\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    engine();\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    instance.completed = instance.reversed ? false : true;\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.remove = function(targets) {\n    var targetsArray = parseTargets(targets);\n    removeTargetsFromInstance(targetsArray, instance);\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargetsFromInstance(targetsArray, instance) {\n  var animations = instance.animations;\n  var children = instance.children;\n  removeTargetsFromAnimations(targetsArray, animations);\n  for (var c = children.length; c--;) {\n    var child = children[c];\n    var childAnimations = child.animations;\n    removeTargetsFromAnimations(targetsArray, childAnimations);\n    if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n  }\n  if (!animations.length && !children.length) { instance.pause(); }\n}\n\nfunction removeTargetsFromActiveInstances(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    removeTargetsFromInstance(targetsArray, instance);\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.2.1';\nanime.speed = 1;\n// TODO:#review: naming, documentation\nanime.suspendWhenDocumentHidden = true;\nanime.running = activeInstances;\nanime.remove = removeTargetsFromActiveInstances;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","import { lerp, getMousePos } from './utils';\r\nimport anime from 'animejs'\r\n\r\n// Track the mouse position\r\nlet mouse = {x: 0, y: 0};\r\nwindow.addEventListener('mousemove', ev => mouse = getMousePos(ev));\r\nwindow.addEventListener('touchmove', ev => document.querySelector('.cursor').style.display = 'none');\r\n\r\nexport default class Cursor {\r\n    constructor(el) {\r\n        this.DOM = {el: el};\r\n        this.DOM.el.style.opacity = 0;\r\n\r\n        this.bounds = this.DOM.el.getBoundingClientRect();\r\n\r\n        this.renderedStyles = {\r\n            tx: {previous: 0, current: 0, amt: 0.2},\r\n            ty: {previous: 0, current: 0, amt: 0.2}\r\n        };\r\n\r\n        this.onMouseMoveEv = () => {\r\n            this.renderedStyles.tx.previous = this.renderedStyles.tx.current = mouse.x - this.bounds.width/2;\r\n            this.renderedStyles.ty.previous = this.renderedStyles.ty.previous = mouse.y - this.bounds.height/2;\r\n\r\n            anime({\r\n              targets: this.DOM.el,\r\n              duration: 900,\r\n              ease: 'easeOut',\r\n              opacity: 1,\r\n            })\r\n\r\n            // gsap.to(this.DOM.el, {duration: 0.9, ease: 'Power3.easeOut', opacity: 1});\r\n            requestAnimationFrame(() => this.render());\r\n            window.removeEventListener('mousemove', this.onMouseMoveEv);\r\n        };\r\n        window.addEventListener('mousemove', this.onMouseMoveEv);\r\n    }\r\n    render() {\r\n        this.renderedStyles['tx'].current = mouse.x - this.bounds.width/2;\r\n        this.renderedStyles['ty'].current = mouse.y - this.bounds.height/2;\r\n\r\n        for (const key in this.renderedStyles ) {\r\n            this.renderedStyles[key].previous = lerp(this.renderedStyles[key].previous, this.renderedStyles[key].current, this.renderedStyles[key].amt);\r\n        }\r\n\r\n        this.DOM.el.style.transform = `translateX(${(this.renderedStyles['tx'].previous)}px) translateY(${this.renderedStyles['ty'].previous}px)`;\r\n        this.DOM.el.style.opacity = '1'\r\n\r\n        requestAnimationFrame(() => this.render());\r\n    }\r\n}\r\n","import m from 'mithril'\nimport {\n  transition,\n} from '../../app.js'\n\n\nmodule.exports = {\n  view() {\n    return m('.nav.space-between#nav[data-scroll][data-scroll-sticky][data-scroll-target=#main]', [\n      m('.link-wrapper',\n        m('a.home-link.underlined', {\n          onclick() {\n            if (location.hash != '#!/') {\n              transition()\n              setTimeout(() => {\n                m.route.set('/')\n              }, 1000);\n            }\n          }\n        }, 'Elena Kustova')),\n      m('.link-wrapper',\n        m('a.works-link.underlined', {\n          onclick() {\n            if (location.hash != '#!/works') {\n              transition()\n              setTimeout(() => {\n                m.route.set('/works')\n              }, 1000);\n            }\n          }\n        }, 'My Works')),\n      m('.link-wrapper',\n        m('a.about-link.underlined', {\n            onclick() {\n              if (location.hash != '#!/about') {\n                transition()\n                setTimeout(() => {\n                  m.route.set('/about')\n                }, 1000);\n              }\n            }\n          },\n          'About')),\n    ])\n  }\n}\n","module.exports = {about: [\"About Me\", \"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.\", \"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.\"]};","import m from 'mithril';\nimport {\n    transition\n} from '../../app'\n\nlet vkSvg = {\n    view() {\n        return m(\"svg[version='1.1'][id='Layer_1'][xmlns='http://www.w3.org/2000/svg'][xmlns:xlink='http://www.w3.org/1999/xlink'][x='0px'][y='0px'][viewBox='0 0 304.36 304.36'][xml:space='preserve']\", {\n            \"style\": {\n                \"enable-background\": \"new 0 0 304.36 304.36\"\n            }\n        }, [\n            m(\"g[id='XMLID_1_']\",\n                m(\"path[id='XMLID_807_'][d='M261.945,175.576c10.096,9.857,20.752,19.131,29.807,29.982 c4,4.822,7.787,9.798,10.684,15.394c4.105,7.955,0.387,16.709-6.746,17.184l-44.34-0.02c-11.436,0.949-20.559-3.655-28.23-11.474 c-6.139-6.253-11.824-12.908-17.727-19.372c-2.42-2.642-4.953-5.128-7.979-7.093c-6.053-3.929-11.307-2.726-14.766,3.587 c-3.523,6.421-4.322,13.531-4.668,20.687c-0.475,10.441-3.631,13.186-14.119,13.664c-22.414,1.057-43.686-2.334-63.447-13.641 c-17.422-9.968-30.932-24.04-42.691-39.971C34.828,153.482,17.295,119.395,1.537,84.353C-2.01,76.458,0.584,72.22,9.295,72.07 c14.465-0.281,28.928-0.261,43.41-0.02c5.879,0.086,9.771,3.458,12.041,9.012c7.826,19.243,17.402,37.551,29.422,54.521 c3.201,4.518,6.465,9.036,11.113,12.216c5.142,3.521,9.057,2.354,11.476-3.374c1.535-3.632,2.207-7.544,2.553-11.434 c1.146-13.383,1.297-26.743-0.713-40.079c-1.234-8.323-5.922-13.711-14.227-15.286c-4.238-0.803-3.607-2.38-1.555-4.799 c3.564-4.172,6.916-6.769,13.598-6.769h50.111c7.889,1.557,9.641,5.101,10.721,13.039l0.043,55.663 c-0.086,3.073,1.535,12.192,7.07,14.226c4.43,1.448,7.35-2.096,10.008-4.905c11.998-12.734,20.561-27.783,28.211-43.366 c3.395-6.852,6.314-13.968,9.143-21.078c2.096-5.276,5.385-7.872,11.328-7.757l48.229,0.043c1.43,0,2.877,0.021,4.262,0.258 c8.127,1.385,10.354,4.881,7.844,12.817c-3.955,12.451-11.65,22.827-19.174,33.251c-8.043,11.129-16.645,21.877-24.621,33.072 C252.26,161.544,252.842,166.697,261.945,175.576L261.945,175.576z M261.945,175.576']\", {\n                    \"style\": {\n                        \"fill-rule\": \"evenodd\",\n                        \"clip-rule\": \"evenodd\"\n                    }\n                })\n            ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"g\", ),\n            m(\"style[xmlns='http://www.w3.org/1999/xhtml'][type='text/css']\")\n        ])\n    }\n}\n\nmodule.exports = {\n    routes: ['home', 'works', 'about'],\n    oncreate() {\n        let links = document.querySelectorAll('.footer-nav a')\n\n        // links.forEach(a => {\n            // a.addEventListener('mouseenter', () => {\n                // if (a.classList.contains('is-inview')) {\n                    // links.forEach(link => {\n                        // if (link != a) {\n                            // link.style.opacity = 0.3\n                        // }\n                    // })\n                // }\n            // })\n            // a.addEventListener('mouseleave', () => {\n                // links.forEach(link => {\n                    // link.style.opacity = ''\n                // })\n            // })\n        // })\n    },\n    view(vnode) {\n        return m('.footer[data-scroll]',\n\n            m('.location.flex-column[data-scroll][data-scroll-speed=2]',\n                m('.name', 'Elena Kustova'),\n                m('.place', 'Perugia - Italy')\n            ),\n            m('.contacts.flex[data-scroll][data-scroll-speed=1]',\n                m('.link-mail',\n                    m('.link-mail-text', 'Contact me at: '),\n                    m('a.mail[href=mailto:kuslena@rambler.ru]', 'kuslena@rambler.ru')\n                ),\n                m('.socials',\n                    m('.socials-title', 'find me also on:'),\n                    m('.links',\n                        m('a.insta-link.flex[href=https://instagram.com/misskustova][target=_blank]',\n                            m(\"svg.css-i6dzq1[viewBox='0 0 24 24'][width='24'][height='24'][stroke='currentColor'][stroke-width='2'][fill='none'][stroke-linecap='round'][stroke-linejoin='round']\", [\n                                m(\"rect[x='2'][y='2'][width='20'][height='20'][rx='5'][ry='5']\"),\n                                m(\"path[d='M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z']\"),\n                                m(\"line[x1='17.5'][y1='6.5'][x2='17.51'][y2='6.5']\")\n                            ]), m('.link-text.insta-link-text', ' @misskustova'),\n                        ),\n                        m('a.vk-link.flex[href=https://vk.com/id17282149][target=_blank]',\n                            m(vkSvg),\n                            m('.link-text.vk-link-text', ' Lena Kustova'),\n                        ),\n                    )\n                )\n            ),\n\n            m(`.footer-nav.flex-column[data-scroll][data-scroll-speed=1][data-scroll-call=hide]`, {\n                    oncreate(vnode) {\n                        vnode.dom.addEventListener('hide', () => {\n                            console.log('hiding nav');\n                        })\n                    }\n                },\n                m('a.btt[data-scroll]', m('span', {\n                    onclick() {\n                        m.redraw()\n                        console.log(vnode.scroll)\n                    }\n                }, 'back to top')),\n                vnode.state.routes.map(route => {\n                    if (location.hash != `#!/${route}`) {\n                        return m(`a.${route}[data-scroll]`, {\n                            onclick() {\n                                if (location.hash != `#!/${route}`) {\n                                    transition()\n                                    setTimeout(() => {\n                                        m.route.set(`/${route}`)\n                                    }, 1000);\n                                }\n                            }\n                        }, m('span', route))\n                    }\n                })\n\n            ),\n            m('.credits[data-scroll][data-scroll-speed=2]',\n                m('span', 'website credits: '), m('span', 'Nasir Taov')\n            )\n\n\n\n        )\n    }\n}\n","import imagesLoaded from \"imagesloaded\";\nimport LocomotiveScroll from \"locomotive-scroll\";\nimport pics from \"../assets/img/*/*.jpg\";\nlet allSources = [],\n    scroll;\n\nfor (const key in pics) {\n    //array of images\n    allSources = allSources.concat(Object.values(pics[key]));\n}\n\nlet allImages = allSources.map((src) => {\n    let img = document.createElement(\"img\");\n    img.src = src;\n    return img;\n});\n\nexport default function Loader(vnode, scroll, mult) {\n    let imagesPromise = new Promise((resolve) => {\n        let images = imagesLoaded(allImages);\n\n        if (scroll) {\n            scroll.destroy();\n        }\n\n        images.on(\"progress\", (instance) => {\n            const len = instance.elements.length;\n            const count = instance.progressedCount;\n            const perc = Math.round((count * 100) / len);\n            document.querySelector(\".loader__text\").textContent = `${perc}%`;\n        });\n\n        images.on(\"done\", () => {\n            const loader = document.querySelector(\".loader\");\n            loader.classList.add(\"loaded\");\n\n            scroll = new LocomotiveScroll({\n                el: document.querySelector(\"main > div\"),\n                multiplier: mult ? mult : 1,\n                smooth: true,\n                smartphone: {\n                    smooth: true,\n                },\n            });\n            scroll.on(\"scroll\", (args) => {\n                const { limit } = args;\n                vnode.state.scrolled = Math.round((args.scroll.y * 100) / limit.y);\n                // if (vnode.state.scrolled > 50) {\n                // scroll.update();\n                // }\n            });\n            scroll.update();\n            return resolve({ images, scroll });\n        });\n    });\n    return imagesPromise;\n}\n","import m from \"mithril\";\nimport Nav from \"./Nav\";\nimport {cursor} from \"../../app.js\";\nimport mypic from \"../assets/mypic.jpg\";\nimport text from \"../assets/text/about.toml\";\n// import LocomotiveScroll from \"locomotive-scroll\";\nimport Cursor from \"./cursor\";\nimport Footer from \"./Footer\";\nimport Loader from \"./Loader\";\nlet scroll;\nconst title = text.about[0]\nconst paragraphs = text.about.splice(1)\n\nconsole.log(text)\n\nmodule.exports = {\n    async oncreate(vnode) {\n        // initialize smoothscroll\n        //\n        const loader = await Loader(vnode, scroll);\n        scroll = loader.scroll;\n\n        document.querySelector(\".footer-nav .btt\").onclick = () => {\n            scroll.scrollTo(\"top\");\n        };\n        if (!cursor) {\n            new Cursor(document.querySelector(\"svg.cursor\"));\n        }\n    },\n    onremove() {\n        scroll.destroy();\n    },\n    view(vnode) {\n        // check width > 768px to apply sticky to picture\n        vnode.state.width = window.innerWidth;\n        let sticky = vnode.state.width > 768 ? \"[data-scroll-sticky]\" : \"\";\n\n        return m(\n            \".about-page-wrapper[data-scroll-container]\",\n            m(\n                \"#main\",\n                m(Nav),\n                m(\".content#content[data-scroll]\", [\n                    m(`.picture-wrapper[data-scroll]${sticky}[data-scroll-target=#content]`, m(`img[src=${mypic}]`)),\n                    m(\n                        \"p.text-wrapper[data-scroll]\",\n                        m(\".title-wrapper[data-scroll]\", m(\"section.content__item.content__item--home.content__item--current[data-scroll][data-scroll-speed=0]\", m(\".paragraph-wrapper\", m(\".content__paragraph[data-scroll]\", title)), m(\".paragraph-wrapper\", m(\".content__paragraph[data-scroll]\", \"Me\")))),\n                        m(\n                            \".paragraph-wrapper\", paragraphs.map(p => {\n                                return m(\".text[data-scroll][data-scroll-speed=3]\", m(\"p\", p))\n                            })\n                        )\n                    ),\n                ])\n            ),\n            m(Footer)\n        );\n    },\n};\n","import m from 'mithril'\nimport anime from 'animejs'\n\nimport {\n  lerp,\n  getMousePos,\n  map,\n  clamp\n} from './utils'\n\nimport {\n  transition\n} from '../../app.js'\nimport pics from '../assets/img/*/*.jpg'\n\n// track the mouse position\nlet mousepos = {\n  x: 0,\n  y: 0\n};\n// cache the mouse position\nlet mousePosCache = mousepos;\nlet direction = {\n  x: mousePosCache.x - mousepos.x,\n  y: mousePosCache.y - mousepos.y\n};\n\n// update mouse position when moving the mouse\nwindow.addEventListener('mousemove', ev => mousepos = getMousePos(ev));\n\nexport default class MenuItem {\n  constructor(vnode) {\n    this.vnode = vnode\n    this.menuItem = vnode.attrs.item\n    this.index = vnode.attrs.index\n    this.url = vnode.attrs.url\n    this.animProps = vnode.attrs.animProps\n    this.showing = undefined\n    this.hiding = undefined\n  }\n  oncreate() {\n    this.reveal = this.vnode.dom.querySelector('.hover-reveal')\n    this.revealInner = this.vnode.dom.querySelector('.hover-reveal__inner')\n    this.revealImage = this.vnode.dom.querySelector('.hover-reveal__img')\n    this.initEvents()\n  }\n  initEvents() {\n    this.mouseenterFn = (ev) => {\n      // show the image element\n      this.showImage();\n      this.firstRAFCycle = true;\n      // start the render loop animation (rAF)\n      this.loopRender();\n    };\n    this.mouseleaveFn = () => {\n      // stop the render loop animation (rAF)\n      this.stopRendering();\n      // hide the image element\n      this.hideImage();\n    };\n\n    this.vnode.dom.addEventListener('mouseenter', this.mouseenterFn);\n    this.vnode.dom.addEventListener('mouseleave', this.mouseleaveFn);\n  }\n  showImage() {\n    let menuItem = this.vnode.dom\n    let reveal = this.reveal\n    // document.body.style.backgroundColor = 'black';\n    this.showing = anime({\n      targets: [this.revealInner, this.revealImage],\n      easing: 'easeOutSine',\n      // opacity: 1,\n      duration: 250,\n      translateX: [direction.x < 0 ? '-100%' : '100%', '0%'],\n      begin(anim) {\n        anim.animatables.forEach(item => item.target.style.opacity = '1');\n        // menuItem.style.zIndex = '10'\n        reveal.style.opacity = '1'\n      }\n    })\n  }\n  hideImage() {\n    let menuItem = this.vnode.dom\n    // menuItem.style.zIndex = '1'\n    this.hiding = anime({\n      targets: [this.revealInner, this.revealImage],\n      complete(anim) {\n        let reveal = anim.animatables[0].target.parentElement\n        if (this.showing) {\n          // document.body.style.backgroundColor = '#d7cca1';\n          reveal.style.opacity = '0'\n        }\n      },\n      // opacity: 0,\n      duration: 250,\n      easing: 'easeOutSine',\n      // zIndex: 1,\n      translateX: ['0%', direction.x < 0 ? '100%' : '-100%'],\n    })\n\n  }\n  // calculate the position/size of both the menu item and reveal element\n  calcBounds() {\n    this.bounds = {\n      el: this.vnode.dom.getBoundingClientRect(),\n      reveal: this.reveal.getBoundingClientRect()\n    };\n  }\n  loopRender() {\n    if (!this.requestId) {\n      this.requestId = requestAnimationFrame(() => this.render());\n    }\n  }\n  // stop the render loop animation (rAF)\n  stopRendering() {\n    if (this.requestId) {\n      window.cancelAnimationFrame(this.requestId);\n      this.requestId = undefined;\n    }\n  }\n  render() {\n    this.requestId = undefined;\n\n    if (this.firstRAFCycle) {\n      this.calcBounds();\n    }\n\n    const mouseDistanceX = clamp(Math.abs(mousePosCache.x - mousepos.x), 0, 100);\n    direction = {\n      x: mousePosCache.x - mousepos.x,\n      y: mousePosCache.y - mousepos.y\n    };\n    mousePosCache = {\n      x: mousepos.x,\n      y: mousepos.y\n    };\n\n    this.animProps.tx.current = Math.abs(mousepos.x - this.bounds.el.left) - this.bounds.reveal.width / 2;\n    this.animProps.ty.current = Math.abs(mousepos.y - this.bounds.el.top) - this.bounds.reveal.height / 2;\n    this.animProps.rotation.current = this.firstRAFCycle ? 0 : map(mouseDistanceX, 0, 100, 0, direction.x < 0 ? 60 : -60);\n    this.animProps.blur.current = this.firstRAFCycle ? 1 : map(mouseDistanceX, 0, 100, 0, 4);\n\n    this.animProps.tx.previous = this.firstRAFCycle ? this.animProps.tx.current : lerp(this.animProps.tx.previous, this.animProps.tx.current, this.animProps.tx.amt);\n    this.animProps.ty.previous = this.firstRAFCycle ? this.animProps.ty.current : lerp(this.animProps.ty.previous, this.animProps.ty.current, this.animProps.ty.amt);\n    this.animProps.rotation.previous = this.firstRAFCycle ? this.animProps.rotation.current : lerp(this.animProps.rotation.previous, this.animProps.rotation.current, this.animProps.rotation.amt);\n    this.animProps.blur.previous = this.firstRAFCycle ? this.animProps.blur.current : lerp(this.animProps.blur.previous, this.animProps.blur.current, this.animProps.blur.amt);\n\n    anime({\n      targets: this.reveal,\n      translateY: this.animProps.ty.previous - document.querySelector('html').scrollTop,\n      translateX: this.animProps.tx.previous,\n      rotate: this.animProps.rotation.previous,\n      // filter: `blur(${this.animProps.blur.previous}px)`,\n      easing: 'easeInOutQuad',\n      duration: 0,\n    })\n\n    this.firstRAFCycle = false;\n    this.loopRender()\n  }\n  view() {\n    return m('.link[data-scroll]', {\n        href: `project/${this.index}`,\n        class: 'menu__item',\n        onclick(e) {\n          e.preventDefault()\n          transition()\n          setTimeout(() => {\n            m.route.set(`/${this.getAttribute('href')}`)\n          }, 1000)\n        }\n      },\n      m('span.menu__item-text',\n        m('span.menu__item-textinner', this.menuItem),\n      ),\n      m('span.menu__item-sub', ''),\n      m('.hover-reveal[style=opacity: 0]',\n        m('.hover-reveal__inner[style=overflow:hidden]',\n          m('.hover-reveal__img', {\n            style: `background-image: url(${this.url})`\n          })\n        )\n      )\n    )\n  }\n}\n\nfunction cancelAnimation(animation) {\n  let activeInstances = anime.running;\n  let index = activeInstances.indexOf(animation);\n  activeInstances.splice(index, 1);\n}\n","import m from \"mithril\";\nimport LocomotiveScroll from \"locomotive-scroll\";\nimport anime from \"animejs\";\nimport imagesLoaded from \"imagesloaded\";\n\nimport Cursor from \"./cursor\";\nimport { transition, cursor } from \"../../app.js\";\nimport { lerp, getMousePos, map, clamp } from \"./utils\";\nimport pics from \"../assets/img/*/*.jpg\";\nimport Nav from \"./Nav\";\nimport Loader from \"./Loader\";\nimport MenuItem from \"./menuItem\";\n\nlet projects = {};\nfor (const key in pics) {\n    projects[key] = Object.values(pics[key]);\n}\n\nlet scroll;\n\nexport default class Works {\n    constructor() {\n        this.menuItems = Object.keys(projects);\n\n        // menu item properties that will animate as we move the mouse around the menu\n        // we will be using interpolation to achieve smooth animations.\n        // the previous and current values are the values to interpolate.\n        // the value applied to the element, this case the image element (this.DOM.reveal) will be a value between these two values at a specific increment.\n        // the amt is the amount to interpolate.\n        this.animatableProperties = {\n            // translationX\n            tx: {\n                previous: 0,\n                current: 0,\n                amt: 0.08,\n            },\n            // translationY\n            ty: {\n                previous: 0,\n                current: 0,\n                amt: 0.08,\n            },\n            // Rotation angle\n            rotation: {\n                previous: 0,\n                current: 0,\n                amt: 0.08,\n            },\n            // CSS filter (blur) value\n            blur: {\n                previous: 0,\n                current: 0,\n                amt: 0.08,\n            },\n        };\n        // show the menu items (initial animation where each menu item gets revealed)\n    }\n    // initial animation for revealing the menu items\n    showMenuItems() {\n        anime({\n            targets: \".menu__item-textinner\",\n            translateY: [\"100%\", \"0%\"],\n            easing: \"easeInOutQuad\",\n            duration: 500,\n            delay: anime.stagger(70),\n        });\n    }\n    async oncreate(vnode) {\n        if (!cursor) {\n            new Cursor(document.querySelector(\"svg.cursor\"));\n        }\n\n        //show menu items\n\n\n        const loader = await Loader(vnode)\n\n        scroll = loader.scroll\n\n        this.showMenuItems();\n    }\n    onbeforeremove() {\n        scroll.destroy()\n        anime({\n            targets: \".menu__item-textinner\",\n            translateY: [0, 100],\n            easing: \"easeInOutQuad\",\n            duration: 300,\n            delay: anime.stagger(30),\n        });\n    }\n    view() {\n        return m(\n            \".works-page-wrapper[data-scroll-container]\",\n            m('#main',\n            m(Nav),\n            m(\n                \".menu-items-wrapper\",\n                this.menuItems.map((item, index) => {\n                    return m(MenuItem, {\n                        item,\n                        index,\n                        animProps: this.animatableProperties,\n                        url: projects[item][0],\n                    });\n                })\n            ),\n            m(\".divider[data-scroll][data-scroll-repeat][style=padding-bottom: 4rem;]\", m(\"span.divider-text\", \"and more to come!\"))\n        ))\n    }\n}\n","import m from \"mithril\";\nimport anime from \"animejs\";\nimport { transition } from \"../../app\";\n\nfunction applyToArray(arr, func) {\n    arr.forEach((elem) => {\n        func(elem);\n    });\n}\n\nasync function wait(ms) {\n    await new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nasync function revealer(vnode, projectNames, operator) {\n    const shards = document.querySelectorAll(\".bg-shard\");\n    const text = document.querySelector(\".next-section__project-text\");\n\n    const options = {\n        duration: 500,\n        easing: \"easeInOutQuad\",\n        delay: anime.stagger(150),\n    };\n\n    let anim = anime({\n        targets: text,\n        duration: options.duration * 2,\n        // easing: options.easing,\n        begin() {\n            text.style.opacity = 0\n            shards.forEach((e) => {\n                e.classList.remove(\"uncover\");\n            });\n        },\n        complete() {\n            text.style.opacity = 1\n            shards.forEach((e) => {\n                e.classList.add(\"uncover\");\n            });\n            m.redraw();\n        },\n    });\n\n    if (operator === \"-\") {\n        vnode.state.id -= 1;\n        if (vnode.state.id < 0) {\n            vnode.state.id = projectNames.length - 1;\n        }\n    } else if (operator === \"+\") {\n        vnode.state.id += 1;\n        if (vnode.state.id > projectNames.length - 1) {\n            vnode.state.id = 0;\n        }\n    }\n    const pr = projectNames[vnode.state.id];\n    await wait(options.duration);\n    return pr;\n}\n\n// async function cardFlip(vnode, projectNames, operator) {\n    // const fronts = document.querySelectorAll(\".bg-shard__front\");\n    // const backs = document.querySelectorAll(\".bg-shard__back\");\n    // const text = document.querySelector(\".next-section__project-text\");\n\n//\n    // const options = {\n        // duration: 500,\n        // easing: \"easeInOutQuad\",\n        // delay: anime.stagger(150),\n    // };\n//\n    // anime({\n        // targets: text,\n        // opacity: 0,\n        // duration: options.duration,\n        // easing: options.easing,\n    // });\n//\n    // anime({\n        // targets: fronts,\n        // rotateY: 180,\n        // opacity: 0,\n        // duration: options.duration,\n        // easing: options.easing,\n        // delay: options.delay,\n    // });\n//\n    // anime({\n        // targets: backs,\n        // rotateY: [-180, 0],\n        // complete: flipCards,\n        // duration: options.duration,\n        // easing: options.easing,\n        // delay: options.delay,\n    // });\n//\n    // function flipCards() {\n        // anime({\n            // targets: text,\n            // opacity: 1,\n        // });\n//\n        // anime({\n            // targets: fronts,\n            // rotateY: [-180, 0],\n            // opacity: 1,\n            // begin: m.redraw,\n            // duration: options.duration,\n            // easing: options.easing,\n            // delay: options.delay,\n        // });\n//\n        // anime({\n            // targets: backs,\n            // rotateY: 180,\n            // duration: options.duration,\n            // easing: options.easing,\n            // delay: options.delay,\n        // });\n    // }\n//\n    // if (operator === \"-\") {\n        // vnode.state.id -= 1;\n        // if (vnode.state.id < 0) {\n            // vnode.state.id = projectNames.length - 1;\n        // }\n    // } else if (operator === \"+\") {\n        // vnode.state.id += 1;\n        // if (vnode.state.id > projectNames.length - 1) {\n            // vnode.state.id = 0;\n        // }\n    // }\n    // const pr = projectNames[vnode.state.id];\n    // await wait(options.duration);\n    // return pr;\n// }\n\nmodule.exports = {\n    id: null,\n    next: null,\n    nextPic: null,\n    pics: [],\n    oninit(vnode) {},\n    oncreate() {},\n    view(vnode) {\n        let { nextId, next, nextSrc, projectNames, pics } = JSON.parse(JSON.stringify(vnode.attrs));\n        if (!vnode.state.next) {\n            vnode.state.next = next;\n        }\n\n        if (!vnode.state.id && vnode.state.id != 0) {\n            vnode.state.id = nextId;\n        }\n        const nextPics = Object.values(pics[vnode.state.next]);\n\n        vnode.state.nextPic = nextPics[0];\n\n        return m(\".roller[data-scroll][data-scroll-call=uncover]\", [\n            m(\n                \".next-container.grid\",\n\n                m(\n                    \".next-section.grid\",\n                    {\n                        onclick() {\n                            transition();\n                            setTimeout(() => {\n                                m.route.set(`/project/${vnode.state.id}`);\n                            }, 1000);\n                        },\n                    },\n                    m(\n                        \".next-section__img-wrapper\",\n                        {\n                            // style: `background-image: url(${vnode.state.nextPic})`,\n                        },\n\n                        m(\n                            \".bg-shard[data-scroll]\",\n                            m(\n                                \".bg-shard-sides\",\n                                m(\".bg-shard__front\", {\n                                    style: `background-image: url(${nextPics[0]})`,\n                                }),\n                                m(\".bg-shard__back\")\n                            )\n                        ),\n                        // m(\".shard-spacer\"),\n                        m(\n                            \".bg-shard[data-scroll]\",\n                            m(\n                                \".bg-shard-sides\",\n                                m(\".bg-shard__front\", {\n                                    style: `background-image: url(${nextPics[1]})`,\n                                }),\n                                m(\".bg-shard__back\")\n                            )\n                        ),\n                        // m(\".shard-spacer\"),\n                        m(\n                            \".bg-shard[data-scroll]\",\n                            m(\n                                \".bg-shard-sides\",\n                                m(\".bg-shard__front\", {\n                                    style: `background-image: url(${nextPics[2]})`,\n                                }),\n                                m(\".bg-shard__back\")\n                            )\n                        )\n                    ),\n                    m(\".next-section__project-text\", vnode.state.next)\n                ),\n                m(\n                    \".low-text.flex\",\n                    m(\n                        \".prev\",\n                        {\n                            async onclick() {\n                                // vnode.state.next = await cardFlip(vnode, projectNames, \"-\");\n                                vnode.state.next = await revealer(vnode, projectNames, \"-\");\n                            },\n                        },\n                        m(\".prev__text\", \"prev\")\n                    ),\n                    m(\n                        \".next\",\n                        {\n                            async onclick() {\n                                // vnode.state.next = await cardFlip(vnode, projectNames, \"+\");\n                                vnode.state.next = await revealer(vnode, projectNames, '+')\n                            },\n                        },\n                        m(\".next__text\", \"next\")\n                    )\n                )\n            ),\n        ]);\n    },\n};\n","import m from \"mithril\";\nimport anime from \"animejs\";\nimport imagesLoaded from \"imagesloaded\";\nimport Nav from \"./Nav\";\nimport { transition, cursor } from \"../../app.js\";\nimport LocomotiveScroll from \"locomotive-scroll\";\nimport Cursor from \"./cursor\";\nimport Roller from \"./Roller\";\nimport Loader from \"./Loader\";\nimport pics from \"../assets/img/*/*.jpg\";\n\nlet projectNames = [];\nfor (let key in pics) {\n    projectNames.push(key);\n}\nlet scroll;\n\nfunction handleScroll(scroll) {\n    const body = document.querySelector(\"body\");\n    const nav = document.querySelector(\"#nav\");\n    // const shards = document.querySelectorAll(\".shard-spacer\");\n    const bgDark = \"#1e1e1e\";\n    const bgLight = \"#d7cca1\";\n\n    if (scroll > 85) {\n        body.classList.add('dark')\n        // nav.style.color = \"#ddd\";\n    } else {\n        body.classList.remove('dark')\n        // body.style.backgroundColor = bgLight;\n        // nav.style.color = \"#282828\";\n    }\n}\n\nexport default class Project {\n    constructor() {}\n    oninit(vnode) {\n        vnode.state.pictures = Object.values(pics[projectNames[vnode.attrs.key]]);\n        vnode.state.titleArr = projectNames[vnode.attrs.key].split(\" \");\n        vnode.state.scrolled = 0;\n    }\n    onremove() {\n        scroll.destroy();\n    }\n    async oncreate(vnode) {\n        // initialize smoothscroll\n        const loader = await Loader(vnode, scroll, 2);\n        scroll = loader.scroll;\n        // uncover the shards found in Roller.js\n\n        loader.scroll.on(\"call\", (func) => {\n            if (func === \"uncover\") {\n                document.querySelectorAll(\".bg-shard\").forEach((e) => e.classList.add(\"uncover\"));\n            }\n        });\n\n        loader.scroll.on(\"scroll\", (args) => {\n            const { limit, scroll } = args;\n            vnode.state.scrolled = Math.round((scroll.y * 100) / limit.y);\n            handleScroll(vnode.state.scrolled);\n        });\n\n        setTimeout(() => {\n            loader.scroll.update();\n        }, 1000);\n\n        if (!cursor) {\n            new Cursor(document.querySelector(\"svg.cursor\"));\n        }\n    }\n    view(vnode) {\n        let next;\n        if (parseInt(vnode.attrs.key) + 1 == projectNames.length) {\n            next = projectNames[0];\n        } else {\n            next = projectNames[parseInt(vnode.attrs.key) + 1];\n        }\n\n        // console.log(pics[next], next);\n\n        return m(\".project-page-wrapper[data-scroll-container]\", [\n            m(\n                \"#main\",\n                m(Nav),\n                m(\n                    \".title-wrapper[data-scroll][data-scroll-repeat]\",\n                    m(\n                        \"section.content__item.content__item--project.content__item--current[data-scroll][data-scroll-speed=1]\",\n                        vnode.state.titleArr.map((line) => {\n                            return m(\".paragraph-wrapper\", m(\".content__paragraph[data-scroll]\", line));\n                        })\n                    )\n                ),\n                m(\".divider[data-scroll][data-scroll-repeat]\", m(\"span.divider-text\", \"scroll down\")),\n                m(\n                    \".gallery.grid\",\n                    vnode.state.pictures.map((pic, i) => {\n                        let speed = i % 2 === 0 ? 1 : 4;\n                        // instead of ${speed} will put 1\n                        return m(`.img-wrapper[data-scroll][data-scroll-speed=${speed}]`, m(`img[src=${pic}]`));\n                    })\n                ),\n\n                m(Roller, {\n                    id: parseInt(vnode.attrs.key),\n                    nextId: parseInt(vnode.attrs.key) + 1 == projectNames.length ? 0 : parseInt(vnode.attrs.key) + 1,\n                    next: next,\n                    nextSrc: Object.values(pics[next])[0],\n                    projectNames,\n                    pics,\n                })\n            ),\n        ]);\n    }\n}\n","import imagesLoaded from \"imagesloaded\";\nimport regeneratorRuntime from \"regenerator-runtime\";\n// import 'src/assets/img/*'\nimport m from \"mithril\";\n// import anime from 'animejs'\nimport LocomotiveScroll from \"locomotive-scroll\";\nimport pics from \"./src/assets/img/*/*.jpg\";\nimport Cursor from \"./src/js/cursor\";\n// import {\n// lerp,\n// getMousePos\n// } from './src/js/utils'\nimport About from \"./src/js/About\";\nimport Nav from \"./src/js/Nav\";\nimport Works from \"./src/js/Works\";\nimport Footer from \"./src/js/Footer\";\nimport Project from \"./src/js/Project\";\nimport Loader from \"./src/js/Loader\";\n\nlet main = document.querySelector(\"main\");\n\nlet projects = {};\n// let allSources = [];\n\nfor (const key in pics) {\n    //array of images\n    projects[key] = Object.values(pics[key]);\n    // allSources = allSources.concat(Object.values(pics[key]));\n}\n\nlet projectNames = Object.keys(projects);\nlet scroll, cursor;\n\nwindow.onhashchange = transition;\n\nlet Home = {\n    activeTitle: \"\",\n    slidesIndex: 0,\n    firstScroll: false,\n    slidesLength: 0,\n    picturesObj: {},\n    pictures: [],\n    scrolled: 0,\n    // prev(vnode) {\n    // let projects = document.querySelectorAll('.project-title')\n    //\n    // let slides = document.querySelectorAll('.slide')\n    // let previews = document.querySelectorAll('.preview-slide')\n    // let active = document.querySelector('.slide.active')\n    // let activePreview = document.querySelector('.preview-slide.active')\n    //\n    //\n    // active.classList.toggle('active')\n    // active.classList.toggle('behind')\n    // activePreview.classList.toggle('active')\n    // activePreview.classList.toggle('behind')\n    //\n    // animProjectsOut(vnode.state.slidesIndex)\n    //\n    // if (vnode.state.slidesIndex - 1 === -1) {\n    //   vnode.state.slidesIndex = slides.length - 1\n    // } else {\n    //   vnode.state.slidesIndex -= 1\n    // }\n    // animProjectsIn(vnode.state.slidesIndex)\n    //\n    // slides[vnode.state.slidesIndex].classList.toggle('active')\n    // previews[vnode.state.slidesIndex].classList.toggle('active')\n    //\n    // setTimeout(() => {\n    //   active.classList.toggle(\"behind\");\n    //   activePreview.classList.toggle(\"behind\");\n    // }, 1000);\n    // },\n    // next(vnode) {\n    //   let projects = document.querySelectorAll('.project-title')\n    //\n    //   let slides = document.querySelectorAll('.slide')\n    //   let previews = document.querySelectorAll('.preview-slide')\n    //   let active = document.querySelector('.slide.active')\n    //   let activePreview = document.querySelector('.preview-slide.active')\n    //\n    //\n    //   active.classList.toggle('active')\n    //   active.classList.toggle('behind')\n    //   activePreview.classList.toggle('active')\n    //   activePreview.classList.toggle('behind')\n    //\n    //   animProjectsOut(vnode.state.slidesIndex)\n    //\n    //   if (vnode.state.slidesIndex + 1 === slides.length) {\n    //     vnode.state.slidesIndex = 0\n    //   } else {\n    //     vnode.state.slidesIndex += 1\n    //   }\n    //   animProjectsIn(vnode.state.slidesIndex)\n    //\n    //   slides[vnode.state.slidesIndex].classList.toggle('active')\n    //   previews[vnode.state.slidesIndex].classList.toggle('active')\n    //\n    //   setTimeout(() => {\n    //     active.classList.toggle(\"behind\");\n    //     activePreview.classList.toggle(\"behind\");\n    //   }, 1000);\n    // },\n    async oncreate(vnode) {\n        // if (scroll != null) scroll.init()\n        const loader = await Loader(vnode, scroll)\n\n        scroll = loader.scroll;\n\n        // initialize custom cursor\n        cursor = new Cursor(document.querySelector(\"svg.cursor\"));\n\n        // back to top listener\n        document.querySelector(\".footer-nav .btt\").onclick = () => {\n            scroll.scrollTo(\"top\");\n        };\n    },\n    onremove() {\n        scroll.destroy();\n    },\n    view(vnode) {\n        // let projectDate = Object.keys(Object.values(projects)[vnode.state.slidesIndex])\n        return [\n            m(\n                \".home-page-wrapper[data-scroll-id=home-section]\",\n                m(\n                    \"#main\",\n                    m(Nav),\n                    m(\n                        \".title-wrapper[data-scroll][data-scroll-repeat]\",\n                        m(\n                            \"section.content__item.content__item--home.content__item--current[data-scroll-speed=2][data-scroll]\",\n                            m(\".paragraph-wrapper\", m(\".content__paragraph[data-splitting][data-scroll]\", \"Elena Kustova\")),\n                            m(\".paragraph-wrapper\", m(\".content__paragraph[data-splitting][data-scroll]\", \"Russian\")),\n                            m(\".paragraph-wrapper\", m(\".content__paragraph[data-splitting][data-scroll]\", \"Photographer\")),\n                            m(\".paragraph-wrapper\", m(\".content__paragraph[data-splitting][data-scroll]\", \"Based in Italy\"))\n                        )\n                    ),\n                    m(\".gallery[data-scroll]\", [\n                        //\n\n                        // m('.slides-wrapper',\n                        // m('.work-selector-wrapper.grid', [\n                        // m('.preview[data-scroll][data-scroll-speed=2]',\n                        // [\n                        // m('.project-index', `${vnode.state.slidesIndex+1} / ${vnode.state.slidesLength}`),\n                        // m('.preview-slides',\n                        // projectNames.map((name, i) => {\n                        // return m(`.preview-slide.${i == 0 ? '.active' : '' }`, {\n                        // style: `background-image: url(${pics[name][name + '1']});`\n                        // })\n                        // })),\n                        // m('.buttons.space-between', [\n                        // m('.button.flex.prev', {\n                        // onclick: () => {\n                        // vnode.state.prev(vnode)\n                        // }\n                        // },\n                        // m(\"svg.arrows.arrow-left[xmlns='http://www.w3.org/2000/svg'][width='24'][height='24'][viewBox='0 0 24 24'][fill='none'][stroke='currentColor'][stroke-width='2'][stroke-linecap='round'][stroke-linejoin='round']\",\n                        // [\n                        // m(\"line[x1='19'][y1='12'][x2='5'][y2='12']\"),\n                        // m(\"polyline[points='12 19 5 12 12 5']\")\n                        // ]\n                        // ), m('.text', 'prev')),\n                        // m('.button.flex.next', {\n                        // onclick(e) {\n                        // vnode.state.next(vnode)\n                        // }\n                        // },\n                        // m('.text', 'next'),\n                        // m(\"svg.arrows.arrow-right[xmlns='http://www.w3.org/2000/svg'][width='24'][height='24'][viewBox='0 0 24 24'][fill='none'][stroke='currentColor'][stroke-width='2'][stroke-linecap='round'][stroke-linejoin='round']\",\n                        // [\n                        // m(\"line[x1='5'][y1='12'][x2='19'][y2='12']\"),\n                        // m(\"polyline[points='12 5 19 12 12 19']\")\n                        // ]\n                        // )\n                        // )\n                        // ])\n                        // ],\n                        // [\n                        // m('.project-titles.flex-column', projectNames.map((name, i) => {\n                        // return m(`h1.project-title.project-${name}[index=${i}]`, projectNames[i])\n                        // }))\n                        // ]\n                        // )\n                        // ]),\n                        // m('.slides',\n                        // m('.work-title-wrapper', [\n                        // m('p.work-title', `- tbd -`),\n                        // m('p.explore-project', 'explore')\n                        // ]),\n                        // projectNames.map((name, i) => {\n                        // return m(`.slide${i == 0 ? '.active' : ''}`, m('img', {\n                        // src: projects[name][0]\n                        // }))\n                        // })\n                        // )\n                        // ),\n\n                        //\n                        m(\".divider[data-scroll][data-scroll-repeat]\", m(\"span.divider-text\", \"some of my pictures\")),\n                        m(\n                            \".gallery-pictures-wrapper\",\n                            projectNames.map((key, i) => {\n                                let url = projects[key][0];\n                                let delay = i % 2 === 0 ? \".9\" : \".4\";\n                                // return projects[key].map((url, y) => {\n                                return m(\n                                    \".gallery-pic[style=padding-top:-50%]\",\n                                    m(\n                                        `a.img-wrapper[data-scroll][data-scroll-delay=${delay}][data-scroll-speed=${delay * 4}]`,\n                                        {\n                                            onclick() {\n                                                transition();\n                                                setTimeout(() => {\n                                                    m.route.set(`/project/${i}`);\n                                                }, 1000);\n                                            },\n                                            onmouseenter: () => {\n                                                let title = document.querySelector(`.pic-title.title-${i}`);\n                                                title.classList.remove(\"hidden\");\n                                                title.classList.add(\"animated\");\n                                            },\n                                            onmouseleave: () => {\n                                                let title = document.querySelector(`.pic-title.title-${i}`);\n                                                title.classList.remove(\"animated\");\n                                                title.classList.add(\"hidden\");\n                                            },\n                                        },\n                                        m(`img[title=${key}]`, {\n                                            src: url,\n                                        }),\n                                        m(\".pic-title-wrapper\", m(`.pic-title.title-${key}.title-${i}.hidden`, key))\n                                    )\n                                );\n                                // })\n                            })\n                        ),\n                    ])\n                ),\n                m(Footer)\n            ),\n        ];\n    },\n};\n\nm.route(main, \"/home\", {\n    \"/home\": Home,\n    \"/about\": About,\n    \"/works\": Works,\n    \"/project/:key\": Project,\n});\n\nfunction transition() {\n    document.querySelectorAll(\".is-inview\").forEach((item) => {\n        item.classList.remove(\"is-inview\");\n    });\n    // document.querySelector(\"body\").style.backgroundColor = \"#d7cca1\";\n    const body = document.querySelector(\"body\");\n\n    body.classList.remove(\"dark\");\n}\n\nfunction query(sel) {\n    let obj = document.querySelector(sel);\n    return obj;\n}\nexports.transition = transition;\nexports.scroll = scroll;\nexports.cursor = cursor;\nexports.projects = projects;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}